<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Majalah Al Haromain - Majalah Digital Islami</title>
    <style>
        /* RESET DAN VARIABEL */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-blue: #1a365d;
            --secondary-blue: #2d5281;
            --accent-gold: #d4af37;
            --light-gold: #f7efd9;
            --white: #ffffff;
            --light-gray: #f5f7fa;
            --medium-gray: #e0e6ed;
            --dark-gray: #4a5568;
            --success-green: #38a169;
            --error-red: #e53e3e;
            --warning-yellow: #d69e2e;
        }

        body {
            background-color: var(--white);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ========== LOADING SCREEN ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-blue), #0d2548);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        .loading-logo-icon {
            width: 80px;
            height: 80px;
            background: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            font-size: 36px;
            margin-right: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .loading-logo h1 {
            font-size: 42px;
            font-weight: 800;
            color: var(--white);
        }

        .loading-logo span {
            color: var(--accent-gold);
        }

        .loading-progress {
            width: 300px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 20px;
        }

        .loading-progress-bar {
            height: 100%;
            background-color: var(--accent-gold);
            width: 0%;
            transition: width 0.3s ease;
        }

        .loading-text {
            color: var(--white);
            margin-top: 20px;
            font-size: 18px;
            font-weight: 500;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* ========== ADMIN LOGIN ========== */
        .admin-login-container {
            background: linear-gradient(135deg, var(--primary-blue), #0d2548);
            height: 100vh;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .admin-login-box {
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 450px;
            overflow: hidden;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-login-header {
            background-color: var(--primary-blue);
            padding: 30px;
            text-align: center;
            color: var(--white);
        }

        .admin-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .admin-logo-icon {
            width: 60px;
            height: 60px;
            background: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            font-size: 24px;
            margin-right: 15px;
            border-radius: 10px;
        }

        .admin-logo h1 {
            font-size: 28px;
            font-weight: 700;
        }

        .admin-logo span {
            color: var(--accent-gold);
        }

        .admin-login-header h2 {
            font-size: 20px;
            font-weight: 600;
            margin-top: 10px;
        }

        .admin-login-form {
            padding: 30px;
        }

        .admin-form-group {
            margin-bottom: 25px;
        }

        .admin-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-blue);
            font-size: 14px;
        }

        .admin-form-group input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .admin-form-group input:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
            outline: none;
        }

        .admin-login-button {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 20px;
        }

        .admin-login-button:hover {
            background-color: #152642;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .admin-back-button {
            background-color: transparent;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
            padding: 14px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
            display: block;
            text-decoration: none;
        }

        .admin-back-button:hover {
            background-color: rgba(26, 54, 93, 0.05);
        }

        .admin-alert {
            padding: 14px 16px;
            border-radius: 8px;
            margin-bottom: 25px;
            display: none;
            font-size: 14px;
        }

        .admin-alert.error {
            background-color: #fed7d7;
            color: #9b2c2c;
            border: 1px solid #fc8181;
        }

        .admin-info {
            margin-top: 25px;
            padding: 20px;
            background-color: var(--light-gray);
            border-radius: 8px;
            font-size: 14px;
            border-left: 4px solid var(--accent-gold);
        }

        .admin-info h3 {
            color: var(--primary-blue);
            margin-bottom: 10px;
            font-size: 16px;
        }

        .admin-info ul {
            padding-left: 20px;
            margin-top: 10px;
        }

        .admin-info li {
            margin-bottom: 6px;
        }

        /* ========== ADMIN PANEL ========== */
        .admin-panel {
            display: none;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .admin-sidebar {
            width: 280px;
            background-color: var(--primary-blue);
            color: var(--white);
            padding: 25px 0;
            height: 100vh;
            position: fixed;
            box-shadow: 3px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .admin-sidebar.collapsed {
            transform: translateX(-280px);
        }

        .admin-panel-logo {
            display: flex;
            align-items: center;
            padding: 0 25px;
            margin-bottom: 30px;
        }

        .admin-panel-logo-icon {
            width: 50px;
            height: 50px;
            background: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            margin-right: 12px;
            border-radius: 8px;
        }

        .admin-panel-logo h1 {
            font-size: 22px;
            font-weight: 700;
        }

        .admin-panel-logo span {
            color: var(--accent-gold);
        }

        .admin-user-info {
            display: flex;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .admin-user-avatar {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background-color: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            font-size: 20px;
            margin-right: 15px;
        }

        .admin-user-details h3 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .admin-user-details p {
            font-size: 14px;
            opacity: 0.8;
        }

        .admin-nav-menu {
            list-style: none;
            padding: 0 20px;
        }

        .admin-nav-item {
            margin-bottom: 8px;
        }

        .admin-nav-link {
            display: flex;
            align-items: center;
            padding: 14px 18px;
            color: var(--white);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .admin-nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .admin-nav-link.active {
            background-color: rgba(255, 255, 255, 0.15);
            border-left: 4px solid var(--accent-gold);
        }

        .admin-nav-link i {
            margin-right: 12px;
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .admin-main-content {
            flex: 1;
            margin-left: 280px;
            padding: 30px;
            background-color: var(--light-gray);
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        .admin-main-content.expanded {
            margin-left: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--medium-gray);
        }

        .admin-header h1 {
            color: var(--primary-blue);
            font-size: 28px;
            font-weight: 700;
        }

        .admin-header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-toggle-sidebar {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            display: none;
        }

        .admin-toggle-sidebar:hover {
            background-color: #152642;
        }

        .admin-logout-btn {
            background-color: var(--error-red);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .admin-logout-btn:hover {
            background-color: #c53030;
            transform: translateY(-2px);
        }

        .admin-dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .admin-stat-card {
            background-color: var(--white);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            border-top: 4px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .admin-stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .admin-stat-card:nth-child(1) {
            border-top-color: #4299e1;
        }
        .admin-stat-card:nth-child(2) {
            border-top-color: var(--accent-gold);
        }
        .admin-stat-card:nth-child(3) {
            border-top-color: var(--success-green);
        }
        .admin-stat-card:nth-child(4) {
            border-top-color: #ed8936;
        }

        .admin-stat-icon {
            width: 65px;
            height: 65px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 26px;
        }

        .admin-stat-card:nth-child(1) .admin-stat-icon {
            background-color: #ebf8ff;
            color: #4299e1;
        }
        .admin-stat-card:nth-child(2) .admin-stat-icon {
            background-color: #fefcbf;
            color: var(--warning-yellow);
        }
        .admin-stat-card:nth-child(3) .admin-stat-icon {
            background-color: #c6f6d5;
            color: var(--success-green);
        }
        .admin-stat-card:nth-child(4) .admin-stat-icon {
            background-color: #fed7d7;
            color: var(--error-red);
        }

        .admin-stat-info h3 {
            font-size: 30px;
            margin-bottom: 5px;
            color: var(--primary-blue);
        }

        .admin-stat-info p {
            color: var(--dark-gray);
            font-size: 14px;
            font-weight: 600;
        }

        .admin-content-section {
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
            display: none;
        }

        .admin-content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
        }

        .admin-section-header h2 {
            color: var(--primary-blue);
            font-size: 24px;
            font-weight: 700;
        }

        .admin-add-btn {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .admin-add-btn:hover {
            background-color: #152642;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .admin-form-group {
            margin-bottom: 20px;
        }

        .admin-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-blue);
            font-size: 14px;
        }

        .admin-form-group input, .admin-form-group textarea, .admin-form-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .admin-form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .admin-form-group input:focus, .admin-form-group textarea:focus, .admin-form-group select:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
            outline: none;
        }

        .admin-file-input-container {
            position: relative;
            width: 100%;
        }

        .admin-file-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .admin-file-input-label {
            display: block;
            padding: 20px;
            border: 2px dashed var(--medium-gray);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
            background-color: #fafafa;
        }

        .admin-file-input-label:hover {
            border-color: var(--primary-blue);
            background-color: rgba(26, 54, 93, 0.03);
        }

        .admin-file-name {
            margin-top: 10px;
            font-size: 14px;
            color: var(--dark-gray);
            padding: 5px 10px;
            background-color: var(--light-gray);
            border-radius: 5px;
            display: inline-block;
        }

        .admin-form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }

        .admin-submit-btn {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .admin-submit-btn:hover {
            background-color: #152642;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .admin-cancel-btn {
            background-color: var(--white);
            color: var(--dark-gray);
            border: 2px solid var(--medium-gray);
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .admin-cancel-btn:hover {
            background-color: var(--light-gray);
            border-color: var(--dark-gray);
        }

        .admin-table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid var(--medium-gray);
            max-height: 500px;
            overflow-y: auto;
        }

        .admin-data-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        .admin-data-table th {
            background-color: var(--primary-blue);
            color: var(--white);
            font-weight: 600;
            text-align: left;
            padding: 18px 20px;
            font-size: 14px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .admin-data-table td {
            padding: 18px 20px;
            border-bottom: 1px solid var(--light-gray);
            font-size: 14px;
        }

        .admin-data-table tr:hover {
            background-color: var(--light-gray);
        }

        .admin-action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .admin-edit-btn, .admin-delete-btn, .admin-preview-btn, .admin-confirm-btn, .admin-view-preview-btn {
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .admin-edit-btn {
            background-color: #4299e1;
            color: var(--white);
        }

        .admin-edit-btn:hover {
            background-color: #3182ce;
            transform: translateY(-2px);
        }

        .admin-delete-btn {
            background-color: var(--error-red);
            color: var(--white);
        }

        .admin-delete-btn:hover {
            background-color: #c53030;
            transform: translateY(-2px);
        }

        .admin-preview-btn {
            background-color: var(--success-green);
            color: var(--white);
        }

        .admin-preview-btn:hover {
            background-color: #2f855a;
            transform: translateY(-2px);
        }

        .admin-confirm-btn {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
        }

        .admin-confirm-btn:hover {
            background-color: #c99c2a;
            transform: translateY(-2px);
        }
        
        .admin-view-preview-btn {
            background-color: #805ad5;
            color: var(--white);
        }
        
        .admin-view-preview-btn:hover {
            background-color: #6b46c1;
            transform: translateY(-2px);
        }

        /* Modal Tambah/Edit Majalah */
        #admin-magazine-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        #admin-magazine-modal .modal-content {
            background-color: var(--white);
            border-radius: 12px;
            width: 95%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        #admin-magazine-modal .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 28px;
            cursor: pointer;
            color: var(--dark-gray);
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        #admin-magazine-modal .close-modal:hover {
            background-color: var(--light-gray);
        }

        #admin-magazine-modal .modal-title {
            font-size: 24px;
            margin-bottom: 25px;
            color: var(--primary-blue);
            font-weight: 700;
            padding-right: 40px;
        }

        /* ========== STYLE UNTUK UPLOAD PDF ========== */
        .pdf-upload-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px solid var(--light-gray);
        }

        .pdf-upload-section h4 {
            color: var(--primary-blue);
            margin-bottom: 10px;
            font-size: 18px;
        }

        .pdf-upload-section p {
            color: var(--dark-gray);
            margin-bottom: 20px;
            font-size: 14px;
        }

        .pdf-upload-container {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background-color: var(--light-gray);
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px dashed var(--medium-gray);
        }

        .pdf-preview {
            width: 100px;
            height: 120px;
            border: 2px solid var(--medium-gray);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: var(--white);
            overflow: hidden;
            border-radius: 6px;
        }

        .pdf-preview i {
            font-size: 36px;
            color: var(--error-red);
            margin-bottom: 10px;
        }

        .pdf-preview span {
            font-size: 12px;
            text-align: center;
            padding: 0 5px;
            word-break: break-all;
        }

        .pdf-upload-actions {
            display: flex;
            gap: 10px;
        }

        .pdf-upload-btn, .remove-pdf-btn {
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .pdf-upload-btn {
            background-color: var(--success-green);
            color: white;
            padding: 12px 24px;
            gap: 8px;
        }

        .pdf-upload-btn:hover {
            background-color: #2f855a;
            transform: translateY(-2px);
        }

        .remove-pdf-btn {
            background-color: var(--error-red);
            color: white;
            width: 40px;
            height: 40px;
            font-size: 18px;
        }

        .remove-pdf-btn:hover {
            background-color: #c53030;
        }

        /* ========== FLIPBOOK 3D SMOOTH STYLES ========== */
        .flipbook-viewer-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .flipbook-container {
            width: 95%;
            height: 95%;
            background-color: #1a1a1a;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .flipbook-header {
            background-color: #2d2d2d;
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            border-bottom: 1px solid #444;
        }

        .flipbook-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--accent-gold);
        }

        .flipbook-close {
            background: none;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .flipbook-close:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .flipbook-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            background-color: #333;
            overflow: hidden;
            perspective: 2000px;
        }

        /* Container utama flipbook 3D */
        .flipbook-3d {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            transform-style: preserve-3d;
        }

        /* Container untuk spread (dua halaman) */
        .flipbook-spread-3d {
            position: relative;
            width: 1200px;
            height: 800px;
            display: flex;
            justify-content: center;
            align-items: center;
            transform-style: preserve-3d;
            transform-origin: center center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Halaman dengan efek 3D yang ditingkatkan */
        .page-3d {
            position: absolute;
            width: 50%;
            height: 100%;
            background-color: white;
            box-shadow: 
                0 0 30px rgba(0, 0, 0, 0.2),
                inset 0 0 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform-style: preserve-3d;
            backface-visibility: visible;
            cursor: pointer;
            border-radius: 2px;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Halaman kiri */
        .page-3d.left {
            left: 0;
            border-radius: 5px 0 0 5px;
            transform-origin: right center;
            box-shadow: 
                10px 0 30px rgba(0, 0, 0, 0.3),
                inset 1px 0 0 rgba(0, 0, 0, 0.1);
        }

        /* Halaman kanan */
        .page-3d.right {
            right: 0;
            border-radius: 0 5px 5px 0;
            transform-origin: left center;
            box-shadow: 
                -10px 0 30px rgba(0, 0, 0, 0.3),
                inset -1px 0 0 rgba(0, 0, 0, 0.1);
        }

        /* Efek membalik halaman yang lebih smooth */
        .page-3d.flipping {
            z-index: 100;
            transform: rotateY(-180deg);
            box-shadow: 
                -15px 0 40px rgba(0, 0, 0, 0.4),
                inset -1px 0 0 rgba(0, 0, 0, 0.1);
        }

        .page-3d.left.flipping {
            transform: rotateY(180deg);
            box-shadow: 
                15px 0 40px rgba(0, 0, 0, 0.4),
                inset 1px 0 0 rgba(0, 0, 0, 0.1);
        }

        /* Efek saat halaman sedang di-drag */
        .page-3d.dragging {
            transition: transform 0.1s ease;
            box-shadow: 
                0 15px 50px rgba(0, 0, 0, 0.6),
                inset 0 0 20px rgba(0, 0, 0, 0.15);
        }

        /* Konten halaman */
        .page-content-3d {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 20px;
            background-color: white;
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }

        .page-content-3d img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background-color: white;
        }

        /* Nomor halaman */
        .page-number-3d {
            position: absolute;
            bottom: 15px;
            width: 100%;
            text-align: center;
            font-size: 14px;
            color: #666;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 5px 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            z-index: 1;
        }

        /* Animasi loading yang lebih smooth */
        .flipbook-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            text-align: center;
            z-index: 10;
        }

        .flipbook-loading i {
            font-size: 50px;
            color: var(--accent-gold);
            animation: spin 1.5s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Efek bayangan untuk kedalaman 3D */
        .page-shadow {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(0,0,0,0.1) 0%, 
                rgba(0,0,0,0.05) 5%, 
                rgba(0,0,0,0.01) 15%, 
                transparent 30%);
            pointer-events: none;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .page-3d:hover .page-shadow {
            opacity: 1;
        }

        /* Kontrol flipbook */
        .flipbook-controls {
            background-color: #2d2d2d;
            padding: 18px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            border-top: 1px solid #444;
        }

        .flipbook-nav-button {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .flipbook-nav-button:hover {
            background-color: #152642;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .flipbook-nav-button:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .flipbook-page-info {
            font-weight: 600;
            color: white;
            font-size: 18px;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 8px;
            min-width: 150px;
            text-align: center;
        }

        .flipbook-zoom-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 8px 16px;
            border-radius: 8px;
        }

        .zoom-button, .fullscreen-button {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .zoom-button:hover, .fullscreen-button:hover {
            background-color: #152642;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .zoom-level {
            min-width: 70px;
            text-align: center;
            font-weight: 600;
            color: white;
            font-size: 16px;
        }

        /* Mode tampilan */
        .view-mode-buttons {
            display: flex;
            gap: 10px;
            margin-left: 20px;
        }

        .view-mode-button {
            background-color: #444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .view-mode-button.active {
            background-color: var(--primary-blue);
        }

        .view-mode-button:hover {
            background-color: #555;
            transform: translateY(-2px);
        }

        /* Loading progress */
        .loading-progress-bar {
            width: 200px;
            height: 4px;
            background-color: #444;
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
        }

        .loading-progress-fill {
            height: 100%;
            background-color: var(--accent-gold);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Petunjuk dengan animasi yang lebih smooth */
        .flipbook-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: fadeInOutHint 5s ease-in-out;
        }

        @keyframes fadeInOutHint {
            0% { opacity: 0; transform: translateX(-50%) translateY(10px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(10px); }
        }

        /* Efek kertas saat membalik halaman */
        .page-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 95%, 
                rgba(0,0,0,0.02) 100%);
            pointer-events: none;
            z-index: 1;
        }

        /* Responsif flipbook 3D */
        @media (max-width: 1400px) {
            .flipbook-spread-3d {
                width: 1000px;
                height: 700px;
            }
        }

        @media (max-width: 1200px) {
            .flipbook-spread-3d {
                width: 850px;
                height: 600px;
            }
        }

        @media (max-width: 992px) {
            .flipbook-spread-3d {
                width: 700px;
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            .flipbook-container {
                width: 100%;
                height: 100%;
                border-radius: 0;
            }
            
            .flipbook-spread-3d {
                width: 100%;
                height: 80%;
                flex-direction: column;
            }
            
            .page-3d {
                width: 100%;
                height: 100%;
                position: relative;
                margin-bottom: 20px;
            }
            
            .page-3d.left, .page-3d.right {
                border-radius: 5px;
            }
            
            .flipbook-controls {
                flex-wrap: wrap;
                gap: 15px;
                justify-content: center;
            }
            
            .flipbook-nav-button {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            .flipbook-page-info {
                order: -1;
                width: 100%;
                margin-bottom: 10px;
            }
            
            .view-mode-buttons {
                display: none;
            }
        }

        @media (max-width: 576px) {
            .flipbook-spread-3d {
                height: 70%;
            }
            
            .flipbook-controls {
                flex-direction: column;
                padding: 15px;
            }
            
            .flipbook-nav-button {
                width: 100%;
                justify-content: center;
            }
            
            .flipbook-zoom-controls {
                width: 100%;
                justify-content: center;
            }
        }

        /* Efek untuk mode single page */
        .single-page-mode .page-3d {
            width: 100%;
            left: 0;
            right: 0;
            border-radius: 5px;
        }

        .single-page-mode .page-3d.left {
            display: none;
        }

        .single-page-mode .page-3d.right {
            transform-origin: center center;
        }

        /* Animasi untuk zoom smooth */
        .flipbook-spread-3d {
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Efek ripple saat klik */
        .page-3d::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            opacity: 0;
            pointer-events: none;
        }

        .page-3d:active::after {
            animation: ripple 0.6s ease-out;
        }

        @keyframes ripple {
            0% {
                width: 0;
                height: 0;
                opacity: 0.5;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        /* ========== MAIN WEBSITE ========== */
        .main-website {
            display: block;
            background-color: var(--white);
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-blue), #2a4365);
            padding: 25px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .logo-icon {
            width: 70px;
            height: 70px;
            background: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            font-size: 28px;
            margin-right: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .logo-text h1 {
            font-size: 32px;
            font-weight: 800;
            color: var(--white);
            letter-spacing: 0.5px;
        }

        .logo-text span {
            color: var(--accent-gold);
        }

        .logo-text .tagline {
            font-size: 14px;
            color: #cbd5e0;
            font-style: italic;
            margin-top: 5px;
            font-weight: 400;
        }

        /* User Auth */
        .user-auth {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-button {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            border: none;
            padding: 12px 28px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .auth-button:hover {
            background-color: #c99c2a;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--white);
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 16px;
        }

        .user-email {
            font-size: 12px;
            opacity: 0.8;
        }

        .logout-button {
            background: none;
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }

        .logout-button:hover {
            background-color: rgba(212, 175, 55, 0.1);
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 1200px;
            margin: 25px auto 0;
        }

        nav a {
            color: var(--white);
            text-decoration: none;
            margin: 0 15px;
            padding: 12px 25px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
            position: relative;
            overflow: hidden;
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        nav a.active {
            background-color: rgba(212, 175, 55, 0.2);
            color: var(--accent-gold);
        }

        nav a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background-color: var(--accent-gold);
            border-radius: 3px;
        }

        /* Hero Section */
        .hero {
            min-height: 70vh;
            background: linear-gradient(rgba(26, 54, 93, 0.85), rgba(26, 54, 93, 0.95)), 
                        url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 80px 30px;
            color: var(--white);
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            animation: fadeInUp 1s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero h2 {
            font-size: 48px;
            margin-bottom: 25px;
            font-weight: 800;
            line-height: 1.2;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
        }

        .hero p {
            font-size: 20px;
            max-width: 700px;
            margin: 0 auto 40px;
            line-height: 1.8;
            opacity: 0.95;
        }

        .cta-button {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            padding: 18px 45px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            background-color: #c99c2a;
        }

        /* Majalah Section */
        .magazines-section {
            padding: 80px 30px;
            background-color: var(--light-gray);
        }

        .section-title {
            text-align: center;
            margin-bottom: 60px;
            font-size: 36px;
            color: var(--primary-blue);
            position: relative;
            font-weight: 800;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 5px;
            background-color: var(--accent-gold);
            margin: 15px auto;
            border-radius: 5px;
        }

        .magazines-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .magazine-card {
            background-color: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.4s ease;
            position: relative;
            animation: fadeIn 0.5s ease;
            animation-fill-mode: both;
        }

        .magazine-card:nth-child(1) { animation-delay: 0.1s; }
        .magazine-card:nth-child(2) { animation-delay: 0.2s; }
        .magazine-card:nth-child(3) { animation-delay: 0.3s; }
        .magazine-card:nth-child(4) { animation-delay: 0.4s; }
        .magazine-card:nth-child(5) { animation-delay: 0.5s; }
        .magazine-card:nth-child(6) { animation-delay: 0.6s; }

        .magazine-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .magazine-cover-container {
            height: 400px;
            overflow: hidden;
            position: relative;
        }

        .magazine-cover {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .magazine-card:hover .magazine-cover {
            transform: scale(1.05);
        }

        .magazine-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
            display: flex;
            align-items: flex-end;
            padding: 25px;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .magazine-card:hover .magazine-overlay {
            opacity: 1;
        }

        .magazine-price {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 18px;
        }
        
        .magazine-price.free {
            background-color: var(--success-green);
            color: white;
        }

        .magazine-info {
            padding: 25px;
        }

        .magazine-title {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--primary-blue);
            font-weight: 700;
            line-height: 1.4;
        }

        .magazine-date {
            color: var(--dark-gray);
            margin-bottom: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .magazine-date i {
            color: var(--accent-gold);
        }

        .magazine-description {
            color: #666;
            margin-bottom: 25px;
            font-size: 15px;
            line-height: 1.6;
        }

        .magazine-actions {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .action-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            flex: 1;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .preview-button {
            background-color: var(--primary-blue);
            color: var(--white);
        }

        .preview-button:hover {
            background-color: #152642;
            transform: translateY(-2px);
        }

        .subscribe-button {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
        }

        .subscribe-button:hover {
            background-color: #c99c2a;
            transform: translateY(-2px);
        }

        .read-button {
            background-color: var(--success-green);
            color: white;
        }

        .read-button:hover {
            background-color: #2f855a;
            transform: translateY(-2px);
        }

        /* Status langganan */
        .subscription-status {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .subscription-status.active {
            background-color: #c6f6d5;
            color: var(--success-green);
        }
        
        .subscription-status.free {
            background-color: #4299e1;
            color: white;
        }
        
        .subscription-status.pending {
            background-color: #fed7d7;
            color: var(--error-red);
        }
        
        .subscription-status.expired {
            background-color: #e2e8f0;
            color: var(--dark-gray);
        }

        /* Pricing Section */
        .pricing-section {
            padding: 80px 30px;
            background-color: var(--white);
            text-align: center;
        }

        .pricing-intro {
            max-width: 700px;
            margin: 0 auto 60px;
            font-size: 18px;
            color: var(--dark-gray);
        }

        .pricing-cards {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .pricing-card {
            background-color: var(--white);
            border-radius: 15px;
            padding: 40px 30px;
            width: 350px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            position: relative;
            border: 2px solid transparent;
            transition: all 0.4s ease;
        }

        .pricing-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
            border-color: var(--accent-gold);
        }

        .popular-badge {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            padding: 8px 25px;
            border-radius: 30px;
            font-weight: 800;
            font-size: 14px;
            letter-spacing: 0.5px;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        .pricing-card h3 {
            font-size: 26px;
            margin-bottom: 20px;
            color: var(--primary-blue);
            font-weight: 800;
        }

        .price {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 25px;
            color: var(--primary-blue);
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }

        .price span {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark-gray);
            margin-top: 10px;
            margin-left: 5px;
        }

        .pricing-features {
            list-style: none;
            margin-bottom: 40px;
            text-align: left;
        }

        .pricing-features li {
            margin-bottom: 15px;
            position: relative;
            padding-left: 35px;
            color: var(--dark-gray);
            font-size: 15px;
        }

        .pricing-features li:before {
            content: "";
            color: var(--accent-gold);
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 18px;
            background-color: var(--light-gold);
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Comments Section */
        .comments-section {
            padding: 80px 30px;
            background-color: var(--light-gray);
        }

        .comments-container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Form Komentar */
        .comment-form-container {
            background-color: var(--white);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
        }

        .comment-form-container h3 {
            margin-bottom: 30px;
            color: var(--primary-blue);
            font-size: 26px;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 15px;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group textarea {
            height: 150px;
            resize: vertical;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
            outline: none;
        }

        .rating-stars {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .star {
            font-size: 30px;
            color: #e2e8f0;
            cursor: pointer;
            transition: color 0.2s, transform 0.2s;
        }

        .star:hover {
            transform: scale(1.2);
        }

        .star.active {
            color: var(--accent-gold);
        }

        .submit-comment {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 16px 40px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            display: block;
            margin: 0 auto;
        }

        .submit-comment:hover {
            background-color: #152642;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .login-prompt {
            text-align: center;
            padding: 50px 40px;
            background-color: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border: 2px dashed var(--medium-gray);
        }

        .login-prompt h3 {
            margin-bottom: 20px;
            color: var(--primary-blue);
            font-size: 26px;
        }

        .login-prompt p {
            color: var(--dark-gray);
            margin-bottom: 30px;
            font-size: 16px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        /* Daftar Komentar */
        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .comment-card {
            background-color: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .comment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .comment-author {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .comment-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--accent-gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-weight: bold;
            font-size: 22px;
            flex-shrink: 0;
        }

        .author-info h4 {
            font-size: 18px;
            color: var(--primary-blue);
            margin-bottom: 5px;
            font-weight: 700;
        }

        .comment-rating {
            color: var(--accent-gold);
            font-size: 18px;
            letter-spacing: 2px;
        }

        .comment-date {
            color: var(--dark-gray);
            font-size: 14px;
            background-color: var(--light-gray);
            padding: 6px 15px;
            border-radius: 30px;
            font-weight: 600;
        }

        .comment-text {
            line-height: 1.7;
            color: #555;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .comment-type {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .comment-type.saran {
            background-color: #bee3f8;
            color: #2c5282;
        }

        .comment-type.penilaian {
            background-color: #c6f6d5;
            color: #276749;
        }

        .comment-type.masukan {
            background-color: #fed7d7;
            color: #9b2c2c;
        }

        /* FAQ Section */
        .faq-section {
            padding: 80px 30px;
            background-color: var(--white);
        }

        .faq-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .faq-item {
            margin-bottom: 20px;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-item:hover {
            border-color: var(--accent-gold);
        }

        .faq-question {
            background-color: var(--light-gray);
            padding: 25px 30px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            font-size: 18px;
            color: var(--primary-blue);
            transition: all 0.3s ease;
        }

        .faq-question:hover {
            background-color: #e6eff9;
        }

        .faq-answer {
            padding: 0;
            background-color: var(--white);
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .faq-answer.active {
            padding: 30px;
            max-height: 500px;
        }

        .faq-answer p {
            color: var(--dark-gray);
            line-height: 1.7;
            font-size: 16px;
        }

        .faq-toggle {
            font-size: 24px;
            transition: transform 0.3s ease;
            color: var(--accent-gold);
        }

        .faq-toggle.active {
            transform: rotate(45deg);
        }

        /* Newsletter */
        .newsletter-section {
            padding: 80px 30px;
            background: linear-gradient(135deg, var(--primary-blue), #2a4365);
            text-align: center;
            color: var(--white);
        }

        .newsletter-content {
            max-width: 700px;
            margin: 0 auto;
        }

        .newsletter-form {
            max-width: 500px;
            margin: 40px auto 0;
            display: flex;
            background-color: var(--white);
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .newsletter-input {
            flex: 1;
            padding: 20px 30px;
            border: none;
            font-size: 16px;
            outline: none;
            color: var(--dark-gray);
        }

        .newsletter-button {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            border: none;
            padding: 0 40px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            white-space: nowrap;
        }

        .newsletter-button:hover {
            background-color: #c99c2a;
        }

        /* Footer */
        footer {
            background-color: var(--primary-blue);
            padding: 70px 30px 30px;
            color: var(--white);
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 50px;
            max-width: 1200px;
            margin: 0 auto 50px;
        }

        .footer-logo {
            flex: 1;
            min-width: 300px;
        }

        .footer-logo .logo-icon {
            width: 80px;
            height: 80px;
            font-size: 32px;
            margin-bottom: 25px;
        }

        .footer-logo h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--accent-gold);
        }

        .footer-logo p {
            color: #cbd5e0;
            line-height: 1.7;
            font-size: 15px;
            max-width: 300px;
        }

        .footer-links-section {
            flex: 1;
            min-width: 200px;
        }

        .footer-links-section h4 {
            font-size: 18px;
            margin-bottom: 25px;
            color: var(--accent-gold);
            font-weight: 700;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 15px;
        }

        .footer-links a {
            color: #cbd5e0;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-links a:hover {
            color: var(--accent-gold);
            transform: translateX(5px);
        }

        .footer-links i {
            width: 20px;
            font-size: 14px;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 18px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .social-icon:hover {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #a0aec0;
            font-size: 14px;
        }

        /* Modal Umum */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background-color: var(--white);
            padding: 40px;
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            position: relative;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: modalAppear 0.4s ease;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-content .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: var(--dark-gray);
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-content .close-modal:hover {
            background-color: var(--light-gray);
        }

        .modal-title {
            margin-bottom: 30px;
            color: var(--primary-blue);
            font-size: 28px;
            font-weight: 700;
            padding-right: 40px;
        }

        /* Auth Modal Tabs */
        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light-gray);
        }

        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 18px;
            cursor: pointer;
            font-weight: 700;
            color: var(--dark-gray);
            transition: all 0.3s ease;
            font-size: 16px;
            position: relative;
        }

        .auth-tab.active {
            color: var(--primary-blue);
        }

        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--accent-gold);
            border-radius: 3px 3px 0 0;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .auth-form .form-group {
            margin-bottom: 25px;
        }

        .modal-submit {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 18px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .modal-submit:hover {
            background-color: #152642;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        /* Modal Pembayaran WhatsApp */
        .payment-modal .modal-content {
            max-width: 600px;
        }
        
        .payment-info {
            background-color: var(--light-gold);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid var(--accent-gold);
        }
        
        .payment-info h4 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--primary-blue);
        }
        
        .payment-info p {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary-blue);
        }
        
        .payment-steps {
            list-style-type: decimal;
            padding-left: 25px;
            margin-bottom: 30px;
        }
        
        .payment-steps li {
            margin-bottom: 15px;
            font-size: 16px;
            color: var(--dark-gray);
            line-height: 1.6;
        }
        
        .whatsapp-payment-btn {
            background-color: #25D366;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            width: 100%;
            padding: 20px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
        }
        
        .whatsapp-payment-btn:hover {
            background-color: #128C7E;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.3);
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s;
            animation-fill-mode: forwards;
            max-width: 350px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .toast.success {
            background-color: var(--success-green);
        }

        .toast.error {
            background-color: var(--error-red);
        }

        .toast.warning {
            background-color: var(--warning-yellow);
        }

        .toast.info {
            background-color: var(--primary-blue);
        }

        /* Scroll to top button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background-color: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            background-color: #152642;
            transform: translateY(-5px);
        }

        /* ========== PREVIEW MODAL STYLES ========== */
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .preview-container {
            width: 95%;
            height: 95%;
            background-color: white;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .preview-header {
            background-color: var(--primary-blue);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .preview-title {
            font-size: 20px;
            font-weight: 600;
            color: white;
        }

        .preview-header .preview-subscribe-btn {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .preview-header .preview-subscribe-btn:hover {
            background-color: #c99c2a;
            transform: translateY(-2px);
        }

        .preview-close {
            background: none;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            margin-left: 15px;
        }

        .preview-close:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .preview-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
            background-color: #f5f5f5;
            overflow: auto;
        }

        .preview-pages-container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .preview-page {
            width: 280px;
            height: 400px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .preview-page:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .preview-page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-page-number {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .preview-locked {
            width: 280px;
            height: 400px;
            background: linear-gradient(135deg, var(--primary-blue), #2a4365);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .preview-locked i {
            font-size: 50px;
            color: var(--accent-gold);
            margin-bottom: 20px;
        }

        .preview-locked h4 {
            font-size: 22px;
            margin-bottom: 15px;
            color: white;
        }

        .preview-locked p {
            margin-bottom: 25px;
            font-size: 15px;
            opacity: 0.9;
            line-height: 1.5;
        }

        .preview-locked .subscribe-btn {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preview-locked .subscribe-btn:hover {
            background-color: #c99c2a;
            transform: translateY(-2px);
        }

        .preview-notice {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 600;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .preview-notice i {
            color: var(--accent-gold);
        }

        /* ========== ADMIN PREVIEW UPLOAD STYLES ========== */
        .preview-upload-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px solid var(--light-gray);
        }

        .preview-upload-section h4 {
            color: var(--primary-blue);
            margin-bottom: 10px;
            font-size: 18px;
        }

        .preview-upload-section p {
            color: var(--dark-gray);
            margin-bottom: 20px;
            font-size: 14px;
        }

        .preview-pages-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .preview-page-item {
            background-color: var(--light-gray);
            border-radius: 8px;
            padding: 15px;
            border: 2px dashed var(--medium-gray);
            position: relative;
        }

        .preview-page-item.uploaded {
            border-style: solid;
            border-color: var(--success-green);
        }

        .preview-page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .preview-page-number-label {
            font-weight: 600;
            color: var(--primary-blue);
            font-size: 16px;
        }

        .preview-page-remove {
            background-color: var(--error-red);
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .preview-page-preview {
            width: 100%;
            height: 120px;
            background-color: white;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
            border: 1px solid var(--medium-gray);
        }

        .preview-page-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-page-preview.placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--dark-gray);
            font-size: 14px;
        }

        .preview-page-preview.placeholder i {
            font-size: 30px;
            margin-bottom: 8px;
            color: var(--accent-gold);
        }

        .preview-page-file-name {
            font-size: 12px;
            color: var(--dark-gray);
            text-align: center;
            word-break: break-all;
        }

        .preview-upload-btn {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .preview-upload-btn:hover {
            background-color: #152642;
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .header-container, nav, .magazines-grid, .pricing-cards, .footer-content {
                max-width: 1000px;
            }
        }

        @media (max-width: 992px) {
            .admin-sidebar {
                width: 250px;
            }
            
            .admin-main-content {
                margin-left: 250px;
            }
            
            .hero h2 {
                font-size: 40px;
            }
            
            .hero p {
                font-size: 18px;
            }
            
            .section-title {
                font-size: 32px;
            }
            
            .pricing-card {
                width: 100%;
                max-width: 400px;
            }
            
            .preview-page {
                width: 240px;
                height: 340px;
            }
        }

        @media (max-width: 768px) {
            .admin-sidebar {
                width: 70px;
                overflow: hidden;
            }

            .admin-panel-logo h1, .admin-user-details, .admin-nav-link span {
                display: none;
            }

            .admin-panel-logo-icon {
                margin-right: 0;
            }

            .admin-nav-link {
                justify-content: center;
                padding: 20px;
            }

            .admin-nav-link i {
                margin-right: 0;
                font-size: 20px;
            }

            .admin-main-content {
                margin-left: 70px;
                padding: 20px;
            }

            .admin-dashboard-stats {
                grid-template-columns: 1fr;
            }

            .admin-toggle-sidebar {
                display: flex;
            }

            .header-container {
                flex-direction: column;
                gap: 25px;
                text-align: center;
            }

            .logo {
                justify-content: center;
            }

            .hero h2 {
                font-size: 34px;
            }

            .hero p {
                font-size: 17px;
            }

            .cta-button {
                padding: 16px 35px;
                font-size: 16px;
            }

            .section-title {
                font-size: 28px;
            }

            nav {
                flex-wrap: wrap;
                gap: 10px;
                justify-content: center;
            }

            nav a {
                margin: 0 5px;
                padding: 10px 18px;
                font-size: 14px;
            }

            .footer-content {
                flex-direction: column;
                gap: 40px;
            }

            .footer-links-section {
                min-width: 100%;
            }

            .newsletter-form {
                flex-direction: column;
                border-radius: 12px;
            }

            .newsletter-input {
                border-radius: 12px 12px 0 0;
                padding: 18px;
            }

            .newsletter-button {
                border-radius: 0 0 12px 12px;
                padding: 18px;
            }

            .modal-content {
                padding: 30px 25px;
            }
            
            .preview-pages-container {
                flex-direction: column;
                align-items: center;
            }
            
            .preview-page, .preview-locked {
                width: 100%;
                max-width: 300px;
            }
        }

        @media (max-width: 576px) {
            .hero {
                padding: 60px 20px;
            }
            
            .hero h2 {
                font-size: 28px;
            }
            
            .hero p {
                font-size: 16px;
            }
            
            .magazines-section, .pricing-section, .comments-section, .faq-section, .newsletter-section {
                padding: 60px 20px;
            }
            
            .magazine-card {
                margin: 0 10px;
            }
            
            .magazine-actions {
                flex-direction: column;
            }
            
            .action-button {
                width: 100%;
            }
            
            .scroll-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            .preview-header {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }
            
            .preview-title {
                font-size: 18px;
            }
            
            .preview-notice {
                font-size: 12px;
                padding: 10px 15px;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"></script>
</head>
<body>
    <!-- ========== LOADING SCREEN ========== -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-logo">
            <div class="loading-logo-icon">AH</div>
            <h1>Al <span>Haromain</span></h1>
        </div>
        <div class="loading-progress">
            <div class="loading-progress-bar" id="loading-progress-bar"></div>
        </div>
        <p class="loading-text" id="loading-text">Memuat aplikasi...</p>
    </div>

    <!-- ========== ADMIN LOGIN ========== -->
    <div class="admin-login-container" id="admin-login-container">
        <div class="admin-login-box">
            <div class="admin-login-header">
                <div class="admin-logo">
                    <div class="admin-logo-icon">AH</div>
                    <h1>Al <span>Haromain</span></h1>
                </div>
                <h2>Panel Administrator</h2>
            </div>
            
            <div class="admin-login-form">
                <div class="admin-alert error" id="admin-error-alert">
                    <i class="fas fa-exclamation-circle"></i> Email atau password salah!
                </div>
                
                <form id="admin-login-form">
                    <div class="admin-form-group">
                        <label for="admin-email"><i class="fas fa-envelope"></i> Email Admin</label>
                        <input type="email" id="admin-email" placeholder="admin@alharomain.com" required>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="admin-password"><i class="fas fa-lock"></i> Password</label>
                        <input type="password" id="admin-password" placeholder="Masukkan password" required>
                    </div>
                    
                    <button type="submit" class="admin-login-button">
                        <i class="fas fa-sign-in-alt"></i> Masuk ke Dashboard
                    </button>
                </form>
                
                <button class="admin-back-button" id="admin-back-button">
                    <i class="fas fa-arrow-left"></i> Kembali ke Website
                </button>
                
                <div class="admin-info">
                    <h3><i class="fas fa-info-circle"></i> Informasi Login</h3>
                    <p>Gunakan kredensial berikut untuk mengakses panel admin:</p>
                    <ul>
                        <li><strong>Email:</strong> admin@alharomain.com</li>
                        <li><strong>Password:</strong> admin123</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== ADMIN PANEL ========== -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-sidebar">
            <div class="admin-panel-logo">
                <div class="admin-panel-logo-icon">AH</div>
                <h1>Al <span>Haromain</span></h1>
            </div>
            
            <div class="admin-user-info">
                <div class="admin-user-avatar" id="admin-user-avatar">A</div>
                <div class="admin-user-details">
                    <h3 id="admin-user-name">Administrator</h3>
                    <p id="admin-user-role">Super Admin</p>
                </div>
            </div>
            
            <ul class="admin-nav-menu">
                <li class="admin-nav-item">
                    <a href="#" class="admin-nav-link active" data-section="admin-dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="admin-nav-item">
                    <a href="#" class="admin-nav-link" data-section="admin-magazines">
                        <i class="fas fa-book-open"></i>
                        <span>Kelola Majalah</span>
                    </a>
                </li>
                <li class="admin-nav-item">
                    <a href="#" class="admin-nav-link" data-section="admin-subscribers">
                        <i class="fas fa-users"></i>
                        <span>Data Pelanggan</span>
                    </a>
                </li>
                <li class="admin-nav-item">
                    <a href="#" class="admin-nav-link" data-section="admin-comments">
                        <i class="fas fa-comments"></i>
                        <span>Komentar Pengguna</span>
                    </a>
                </li>
                <li class="admin-nav-item">
                    <a href="#" class="admin-nav-link" id="admin-back-to-website">
                        <i class="fas fa-globe"></i>
                        <span>Kembali ke Website</span>
                    </a>
                </li>
            </ul>
        </div>
        
        <div class="admin-main-content">
            <div class="admin-header">
                <h1 id="admin-page-title">Dashboard Admin</h1>
                <div class="admin-header-controls">
                    <button class="admin-toggle-sidebar" id="admin-toggle-sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button class="admin-logout-btn" id="admin-logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
            
            <!-- Dashboard Section -->
            <section id="admin-dashboard" class="admin-content-section active">
                <div class="admin-dashboard-stats">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="admin-stat-info">
                            <h3 id="admin-total-magazines">0</h3>
                            <p>Total Majalah</p>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="admin-stat-info">
                            <h3 id="admin-total-subscribers">0</h3>
                            <p>Total Pelanggan</p>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="admin-stat-info">
                            <h3 id="admin-total-income">Rp 0</h3>
                            <p>Total Pendapatan</p>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="admin-stat-info">
                            <h3 id="admin-total-comments">0</h3>
                            <p>Total Komentar</p>
                        </div>
                    </div>
                </div>
                
                <div class="admin-section-header">
                    <h2>Majalah Terbaru</h2>
                    <button class="admin-add-btn" id="admin-add-magazine-btn">
                        <i class="fas fa-plus"></i> Tambah Majalah
                    </button>
                </div>
                
                <div class="admin-table-container">
                    <table class="admin-data-table">
                        <thead>
                            <tr>
                                <th>Judul Majalah</th>
                                <th>Tanggal Terbit</th>
                                <th>Status</th>
                                <th>Pembacaan</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="admin-recent-magazines">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Majalah Section -->
            <section id="admin-magazines" class="admin-content-section">
                <div class="admin-section-header">
                    <h2>Kelola Majalah</h2>
                    <button class="admin-add-btn" id="admin-add-magazine-btn-2">
                        <i class="fas fa-plus"></i> Tambah Majalah
                    </button>
                </div>
                
                <div class="admin-table-container">
                    <table class="admin-data-table">
                        <thead>
                            <tr>
                                <th>Judul Majalah</th>
                                <th>Tanggal Terbit</th>
                                <th>Harga</th>
                                <th>Status</th>
                                <th>Preview</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="admin-magazines-list">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Pelanggan Section -->
            <section id="admin-subscribers" class="admin-content-section">
                <div class="admin-section-header">
                    <h2>Data Pelanggan</h2>
                </div>
                
                <div class="admin-table-container">
                    <table class="admin-data-table">
                        <thead>
                            <tr>
                                <th>Nama Pelanggan</th>
                                <th>Email</th>
                                <th>Paket Langganan</th>
                                <th>Tanggal Berlangganan</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="admin-subscribers-list">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Komentar Section -->
            <section id="admin-comments" class="admin-content-section">
                <div class="admin-section-header">
                    <h2>Komentar Pengguna</h2>
                </div>
                
                <div class="admin-table-container">
                    <table class="admin-data-table">
                        <thead>
                            <tr>
                                <th>Nama Pengguna</th>
                                <th>Jenis Komentar</th>
                                <th>Rating</th>
                                <th>Tanggal</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="admin-comments-list">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
        
        <!-- Modal Tambah/Edit Majalah -->
        <div class="modal" id="admin-magazine-modal">
            <div class="modal-content">
                <button class="close-modal">&times;</button>
                <h3 class="modal-title" id="admin-modal-title">Tambah Majalah Baru</h3>
                
                <form id="admin-magazine-form">
                    <input type="hidden" id="admin-magazine-id">
                    
                    <div class="admin-form-group">
                        <label for="admin-magazine-title"><i class="fas fa-heading"></i> Judul Majalah</label>
                        <input type="text" id="admin-magazine-title" placeholder="Masukkan judul majalah" required>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="admin-magazine-date"><i class="fas fa-calendar-alt"></i> Tanggal Terbit</label>
                        <input type="date" id="admin-magazine-date" required>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="admin-magazine-price"><i class="fas fa-tag"></i> Harga (Rp)</label>
                        <input type="number" id="admin-magazine-price" min="0" placeholder="Masukkan harga" required>
                    </div>
                    
                    <!-- TAMBAHAN: Field Jenis Akses -->
                    <div class="admin-form-group">
                        <label for="admin-magazine-access"><i class="fas fa-unlock"></i> Jenis Akses</label>
                        <select id="admin-magazine-access" required>
                            <option value="premium">Premium (Hanya untuk Pelanggan)</option>
                            <option value="free">Gratis (Semua Orang Bisa Akses)</option>
                        </select>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="admin-magazine-description"><i class="fas fa-align-left"></i> Deskripsi</label>
                        <textarea id="admin-magazine-description" placeholder="Deskripsi singkat tentang majalah"></textarea>
                    </div>
                    
                    <div class="admin-form-group">
                        <label for="admin-magazine-cover"><i class="fas fa-image"></i> Cover Majalah</label>
                        <div class="admin-file-input-container">
                            <input type="file" id="admin-magazine-cover" class="admin-file-input" accept="image/*">
                            <label for="admin-magazine-cover" class="admin-file-input-label">
                                <i class="fas fa-cloud-upload-alt"></i> Unggah Gambar Cover
                            </label>
                        </div>
                        <div class="admin-file-name" id="admin-cover-file-name">Belum ada file dipilih</div>
                    </div>
                    
                    <!-- Bagian Upload PDF untuk Flipbook -->
                    <div class="pdf-upload-section">
                        <h4><i class="fas fa-file-pdf"></i> File PDF Majalah (FULL VERSION)</h4>
                        <p>Unggah file PDF lengkap untuk majalah ini (wajib untuk fitur flipbook full):</p>
                        
                        <div id="pdf-upload-container">
                            <!-- Item PDF akan ditambahkan di sini oleh JavaScript -->
                        </div>
                        
                        <button type="button" class="pdf-upload-btn" id="add-pdf-btn">
                            <i class="fas fa-plus"></i> Tambah File PDF
                        </button>
                    </div>
                    
                    <!-- Bagian Upload Halaman Preview -->
                    <div class="preview-upload-section">
                        <h4><i class="fas fa-images"></i> Halaman Preview</h4>
                        <p>Unggah beberapa halaman pertama untuk preview (maksimal 5 halaman). User bisa melihat halaman ini sebelum berlangganan:</p>
                        
                        <div class="preview-pages-list" id="preview-pages-list">
                            <!-- Preview page items akan ditambahkan di sini -->
                        </div>
                        
                        <button type="button" class="preview-upload-btn" id="add-preview-page-btn">
                            <i class="fas fa-plus"></i> Tambah Halaman Preview
                        </button>
                    </div>
                    
                    <div class="admin-form-actions">
                        <button type="button" class="admin-cancel-btn" id="admin-cancel-btn">Batal</button>
                        <button type="submit" class="admin-submit-btn">Simpan Majalah</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ========== MAIN WEBSITE ========== -->
    <div class="main-website" id="main-website">
        <header>
            <div class="header-container">
                <a href="#" class="logo">
                    <div class="logo-icon">AH</div>
                    <div class="logo-text">
                        <h1>Al <span>Haromain</span></h1>
                        <p class="tagline">Sumber Inspirasi dan Pengetahuan Islami</p>
                    </div>
                </a>
                <div class="user-auth" id="user-auth">
                    <button class="auth-button" id="login-button">
                        <i class="fas fa-sign-in-alt"></i> Masuk
                    </button>
                    <button class="auth-button" id="register-button">
                        <i class="fas fa-user-plus"></i> Daftar
                    </button>
                </div>
            </div>
            <nav>
                <a href="#magazines" class="active">Majalah</a>
                <a href="#pricing">Paket Langganan</a>
                <a href="#comments">Komentar</a>
                <a href="#faq">FAQ</a>
            </nav>
        </header>

        <section class="hero">
            <div class="hero-content">
                <h2>E-Majalah Islami Berkualitas</h2>
                <p>Dapatkan akses ke koleksi lengkap majalah digital Al Haromain dengan konten islami yang inspiratif, edukatif, dan mencerahkan. Berlangganan sekarang dan tingkatkan pengetahuan agama Anda!</p>
                <a href="#pricing" class="cta-button">Berlangganan Sekarang</a>
            </div>
        </section>

        <section id="magazines" class="magazines-section">
            <h2 class="section-title">Koleksi Majalah Terbaru</h2>
            <div class="magazines-grid" id="magazines-grid">
                <!-- Majalah akan diisi oleh JavaScript -->
                <div style="grid-column: 1 / -1; text-align: center; padding: 50px;">
                    <i class="fas fa-book-open" style="font-size: 60px; color: var(--accent-gold); margin-bottom: 20px;"></i>
                    <h3 style="color: var(--primary-blue); margin-bottom: 15px;">Belum ada majalah tersedia</h3>
                    <p style="color: var(--dark-gray); max-width: 500px; margin: 0 auto;">Admin dapat mengupload majalah melalui panel admin. Akses panel admin melalui URL khusus.</p>
                </div>
            </div>
        </section>

        <section id="pricing" class="pricing-section">
            <h2 class="section-title">Paket Langganan</h2>
            <p class="pricing-intro">Pilih paket terbaik sesuai kebutuhan Anda. Semua paket memberikan akses ke flipbook majalah digital dengan tampilan seperti membaca buku fisik.</p>
            
            <div class="pricing-cards">
                <!-- Paket 1 -->
                <div class="pricing-card">
                    <h3>Paket Bulanan</h3>
                    <div class="price">Rp50.000 <span>/bulan</span></div>
                    <ul class="pricing-features">
                        <li>Akses 1 majalah pilihan</li>
                        <li>Masa aktif 30 hari</li>
                        <li>Format PDF berkualitas</li>
                        <li>Baca dengan flipbook interaktif</li>
                        <li>Dukungan email</li>
                    </ul>
                    <button class="cta-button subscribe-package" data-package="Bulanan" data-price="50000">Pilih Paket</button>
                </div>
                
                <!-- Paket 2 -->
                <div class="pricing-card">
                    <div class="popular-badge">POPULER</div>
                    <h3>Paket 6 Bulan</h3>
                    <div class="price">Rp250.000 <span>/6 bulan</span></div>
                    <ul class="pricing-features">
                        <li>Akses semua majalah</li>
                        <li>Masa aktif 6 bulan</li>
                        <li>Format PDF & EPUB</li>
                        <li>Flipbook dengan animasi realistik</li>
                        <li>Bonus 1 majalah edisi khusus</li>
                        <li>Dukungan prioritas</li>
                    </ul>
                    <button class="cta-button subscribe-package" data-package="6 Bulan" data-price="250000">Pilih Paket</button>
                </div>
                
                <!-- Paket 3 -->
                <div class="pricing-card">
                    <h3>Paket Tahunan</h3>
                    <div class="price">Rp450.000 <span>/tahun</span></div>
                    <ul class="pricing-features">
                        <li>Akses semua majalah</li>
                        <li>Masa aktif 12 bulan</li>
                        <li>Semua format tersedia</li>
                        <li>Flipbook dengan efek 3D</li>
                        <li>Bonus 3 majalah edisi khusus</li>
                        <li>Konsultasi gratis via WhatsApp</li>
                        <li>Akses ke arsip lengkap</li>
                    </ul>
                    <button class="cta-button subscribe-package" data-package="Tahunan" data-price="450000">Pilih Paket</button>
                </div>
            </div>
        </section>

        <!-- Komentar Section -->
        <section id="comments" class="comments-section">
            <h2 class="section-title">Komentar Pengguna</h2>
            
            <div class="comments-container">
                <!-- Form Komentar -->
                <div id="comment-form-container">
                    <div class="login-prompt">
                        <i class="fas fa-comment-alt" style="font-size: 50px; color: var(--accent-gold); margin-bottom: 20px;"></i>
                        <h3>Silakan masuk untuk memberikan komentar</h3>
                        <p>Anda perlu masuk ke akun Anda untuk memberikan penilaian, saran, atau masukan mengenai website dan majalah ini.</p>
                        <button class="cta-button" id="prompt-login-button">Masuk Sekarang</button>
                    </div>
                </div>
                
                <!-- Daftar Komentar -->
                <div class="comments-list" id="comments-list">
                    <div style="text-align: center; padding: 40px;">
                        <i class="fas fa-comments" style="font-size: 50px; color: var(--medium-gray); margin-bottom: 20px;"></i>
                        <p style="color: var(--dark-gray); font-size: 18px;">Belum ada komentar. Jadilah yang pertama memberikan komentar!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="faq" class="faq-section">
            <h2 class="section-title">Pertanyaan yang Sering Diajukan</h2>
            
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Bagaimana cara berlangganan majalah?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Anda cukup memilih paket langganan yang diinginkan, kemudian mengisi formulir dan melakukan pembayaran via WhatsApp. Setelah pembayaran dikonfirmasi, akses ke majalah akan segera dibuka.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Berapa lama masa aktif langganan?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Masa aktif sesuai dengan paket yang dipilih: 30 hari untuk paket bulanan, 6 bulan untuk paket 6 bulan, dan 12 bulan untuk paket tahunan.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Bagaimana cara membaca majalah di flipbook?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Setelah berlangganan, klik tombol "Baca Majalah" pada majalah yang ingin Anda baca. Flipbook akan terbuka dengan tampilan dua halaman seperti buku fisik. Klik atau geser halaman dengan mouse untuk membalik halaman.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Apakah bisa membaca di smartphone?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Ya, website dan flipbook sepenuhnya responsif dan dapat diakses dengan baik di smartphone, tablet, dan desktop. Di perangkat mobile, Anda dapat menggeser halaman dengan sentuhan.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Bagaimana jika ada masalah teknis?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Tim dukungan kami siap membantu via WhatsApp di 0812-3456-7890 atau email support@alharomain.com. Kami akan merespons dalam waktu kurang dari 1 jam pada jam kerja.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Apakah bisa melihat preview majalah sebelum berlangganan?</span>
                        <span class="faq-toggle">+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Ya! Anda dapat mengklik tombol "Pratinjau" pada setiap majalah untuk melihat beberapa halaman pertama secara gratis. Setelah itu, Anda bisa berlangganan untuk mengakses semua halaman.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="newsletter-section">
            <div class="newsletter-content">
                <h2 class="section-title">Dapatkan Update Terbaru</h2>
                <p>Berlangganan newsletter kami untuk mendapatkan informasi tentang edisi majalah baru, artikel eksklusif, dan penawaran spesial!</p>
                
                <form class="newsletter-form">
                    <input type="email" placeholder="Alamat email Anda" class="newsletter-input" required>
                    <button type="submit" class="newsletter-button">Berlangganan</button>
                </form>
            </div>
        </section>

        <footer>
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="logo-icon">AH</div>
                    <h3>Al Haromain</h3>
                    <p>Platform digital untuk majalah islami berkualitas dengan konten inspiratif dan edukatif untuk meningkatkan pengetahuan agama.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <div class="footer-links-section">
                    <h4>Menu Cepat</h4>
                    <ul class="footer-links">
                        <li><a href="#magazines"><i class="fas fa-chevron-right"></i> Majalah</a></li>
                        <li><a href="#pricing"><i class="fas fa-chevron-right"></i> Paket Langganan</a></li>
                        <li><a href="#comments"><i class="fas fa-chevron-right"></i> Komentar</a></li>
                        <li><a href="#faq"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-links-section">
                    <h4>Layanan</h4>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Berlangganan</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Bantuan</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Kontak Kami</a></li>
                    </ul>
                </div>
                
                <div class="footer-links-section">
                    <h4>Legal</h4>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Syarat & Ketentuan</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Kebijakan Privasi</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Hak Cipta</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Kebijakan Cookie</a></li>
                    </ul>
                </div>
            </div>
            
            <p class="copyright"> 2023 Yayasan Persyada Al Haromain. Semua hak dilindungi. | Versi 2.0</p>
        </footer>

        <!-- Modal Login/Register -->
        <div class="modal" id="auth-modal">
            <div class="modal-content">
                <button class="close-modal">&times;</button>
                <h3 class="modal-title" id="auth-modal-title">Masuk ke Akun Anda</h3>
                
                <div class="auth-tabs">
                    <div class="auth-tab active" id="login-tab">Masuk</div>
                    <div class="auth-tab" id="register-tab">Daftar</div>
                </div>
                
                <form class="auth-form active" id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="Masukkan email Anda" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Masukkan password Anda" required>
                    </div>
                    
                    <button type="submit" class="modal-submit">Masuk</button>
                </form>
                
                <form class="auth-form" id="register-form">
                    <div class="form-group">
                        <label for="register-name">Nama Lengkap</label>
                        <input type="text" id="register-name" placeholder="Masukkan nama lengkap Anda" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" placeholder="Masukkan email Anda" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input type="password" id="register-password" placeholder="Buat password (min. 6 karakter)" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-confirm">Konfirmasi Password</label>
                        <input type="password" id="register-confirm" placeholder="Konfirmasi password" required>
                    </div>
                    
                    <button type="submit" class="modal-submit">Daftar Sekarang</button>
                </form>
            </div>
        </div>
        
        <!-- Modal Pembayaran WhatsApp -->
        <div class="modal payment-modal" id="payment-modal">
            <div class="modal-content">
                <button class="close-modal">&times;</button>
                <h3 class="modal-title">Konfirmasi Pembayaran</h3>
                
                <div class="payment-info">
                    <h4 id="payment-package-name">Paket Bulanan</h4>
                    <p id="payment-package-price">Rp 50.000</p>
                    <p id="payment-magazine-title" style="display:none;">Majalah: <span></span></p>
                </div>
                
                <p>Untuk menyelesaikan proses berlangganan, silakan lakukan pembayaran melalui WhatsApp dengan mengikuti langkah berikut:</p>
                
                <ol class="payment-steps">
                    <li>Klik tombol "Bayar via WhatsApp" di bawah</li>
                    <li>Anda akan diarahkan ke aplikasi WhatsApp</li>
                    <li>Kirim pesan konfirmasi yang sudah disiapkan</li>
                    <li>Admin akan memverifikasi pembayaran Anda</li>
                    <li>Akses ke majalah akan dibuka setelah pembayaran dikonfirmasi</li>
                </ol>
                
                <button class="whatsapp-payment-btn" id="whatsapp-payment-btn">
                    <i class="fab fa-whatsapp"></i> Bayar via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Preview Majalah -->
    <div class="preview-modal" id="preview-modal">
        <div class="preview-container">
            <div class="preview-header">
                <div style="display: flex; align-items: center; gap: 20px;">
                    <h3 class="preview-title" id="preview-magazine-title">Preview Majalah</h3>
                    <div class="preview-notice">
                        <i class="fas fa-info-circle"></i> Preview - Hanya menampilkan beberapa halaman pertama
                    </div>
                </div>
                <div style="display: flex; align-items: center;">
                    <button class="preview-subscribe-btn" id="preview-subscribe-now">
                        <i class="fas fa-shopping-cart"></i> Berlangganan Sekarang
                    </button>
                    <button class="preview-close" id="preview-close">&times;</button>
                </div>
            </div>
            
            <div class="preview-content">
                <div class="preview-pages-container" id="preview-pages-container">
                    <!-- Preview pages akan diisi oleh JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Flipbook Viewer 3D -->
    <div class="flipbook-viewer-modal" id="flipbook-viewer-modal">
        <div class="flipbook-container">
            <div class="flipbook-header">
                <h3 class="flipbook-title" id="flipbook-title">Membaca Majalah</h3>
                <div class="view-mode-buttons">
                    <button class="view-mode-button" id="single-page-btn">
                        <i class="fas fa-file"></i> Satu Halaman
                    </button>
                    <button class="view-mode-button active" id="double-page-btn">
                        <i class="fas fa-book-open"></i> Dua Halaman
                    </button>
                </div>
                <button class="flipbook-close" id="flipbook-close">&times;</button>
            </div>
            <div class="flipbook-content">
                <div class="flipbook-loading" id="flipbook-loading">
                    <i class="fas fa-spinner"></i> 
                    <p>Memuat majalah, harap tunggu...</p>
                    <div class="loading-progress-bar">
                        <div class="loading-progress-fill" id="loading-progress-fill"></div>
                    </div>
                </div>
                <div class="flipbook-3d" id="flipbook-3d">
                    <!-- Container untuk dua halaman -->
                    <div class="flipbook-spread-3d" id="flipbook-spread-3d">
                        <!-- Halaman kiri -->
                        <div class="page-3d left" id="left-page-3d">
                            <div class="page-shadow"></div>
                            <div class="page-content-3d" id="left-page-content-3d">
                                <!-- Konten halaman akan dimuat di sini -->
                            </div>
                            <div class="page-number-3d" id="left-page-number-3d"></div>
                        </div>
                        
                        <!-- Halaman kanan -->
                        <div class="page-3d right" id="right-page-3d">
                            <div class="page-shadow"></div>
                            <div class="page-content-3d" id="right-page-content-3d">
                                <!-- Konten halaman akan dimuat di sini -->
                            </div>
                            <div class="page-number-3d" id="right-page-number-3d"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Petunjuk penggunaan -->
                <div class="flipbook-hint" id="flipbook-hint">
                    <i class="fas fa-hand-point-up"></i> Klik atau geser halaman untuk membalik
                </div>
            </div>
            <div class="flipbook-controls">
                <button class="flipbook-nav-button" id="flipbook-prev-button" disabled>
                    <i class="fas fa-chevron-left"></i> Halaman Sebelumnya
                </button>
                
                <div class="flipbook-page-info">
                    Halaman: <span id="flipbook-current-page">1</span> dari <span id="flipbook-total-pages">-</span>
                </div>
                
                <div class="flipbook-zoom-controls">
                    <button class="zoom-button" id="zoom-out-btn" title="Perkecil">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <div class="zoom-level" id="zoom-level">100%</div>
                    <button class="zoom-button" id="zoom-in-btn" title="Perbesar">
                        <i class="fas fa-search-plus"></i>
                    </button>
                    <button class="zoom-button fullscreen-button" id="fullscreen-btn" title="Fullscreen">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
                
                <button class="flipbook-nav-button" id="flipbook-next-button">
                    Halaman Berikutnya <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Scroll to top button -->
    <button class="scroll-top" id="scroll-top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Toast Notification -->
    <div id="toast-container"></div>

    <script>
        // ========== DATA STORAGE ==========
        // Simulasi database dengan localStorage
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let comments = JSON.parse(localStorage.getItem('comments')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let adminMagazines = JSON.parse(localStorage.getItem('admin_magazines')) || [];
        let subscribers = JSON.parse(localStorage.getItem('subscribers')) || [];
        
        // Data admin
        const adminUsers = [
            {
                id: 1,
                name: "Administrator",
                email: "admin@alharomain.com",
                password: "admin123",
                role: "admin"
            }
        ];

        // ========== VARIABEL GLOBAL ==========
        let currentPaymentData = null;
        let currentFlipbookData = null;
        let currentPreviewData = null;
        let adminPreviewPages = []; // Array untuk menyimpan halaman preview di admin
        
        // Variabel untuk flipbook 3D
        let currentPage = 1;
        let totalPages = 0;
        let flipbookZoom = 1;
        let isFlipping = false;
        let pdfDoc = null;
        let renderedPages = {};
        let isDoublePageMode = true;
        let isFullscreen = false;
        
        // Variabel untuk preload halaman
        let pagePreloadQueue = [];
        let isPreloading = false;

        // Variabel untuk drag 3D yang lebih smooth
        let isDragging = false;
        let dragStartX = 0;
        let dragCurrentX = 0;
        let dragVelocity = 0;
        let dragDirection = null;
        let dragStartTime = 0;
        const DRAG_THRESHOLD = 50;
        const MIN_SWIPE_VELOCITY = 0.5;

        // ========== DOM ELEMENTS ==========
        // Loading Screen
        const loadingScreen = document.getElementById('loading-screen');
        const loadingProgressBar = document.getElementById('loading-progress-bar');
        const loadingText = document.getElementById('loading-text');
        
        // Admin Elements
        const adminLoginContainer = document.getElementById('admin-login-container');
        const adminPanel = document.getElementById('admin-panel');
        const mainWebsite = document.getElementById('main-website');
        const adminLoginForm = document.getElementById('admin-login-form');
        const adminErrorAlert = document.getElementById('admin-error-alert');
        const adminBackButton = document.getElementById('admin-back-button');
        const adminBackToWebsite = document.getElementById('admin-back-to-website');
        const adminLogoutBtn = document.getElementById('admin-logout-btn');
        const adminToggleSidebar = document.getElementById('admin-toggle-sidebar');
        const adminUserAvatar = document.getElementById('admin-user-avatar');
        const adminUserName = document.getElementById('admin-user-name');
        const adminSidebar = document.querySelector('.admin-sidebar');
        const adminMainContent = document.querySelector('.admin-main-content');
        
        // Admin Magazine Modal
        const adminMagazineModal = document.getElementById('admin-magazine-modal');
        const adminAddMagazineBtn = document.getElementById('admin-add-magazine-btn');
        const adminAddMagazineBtn2 = document.getElementById('admin-add-magazine-btn-2');
        const adminMagazineForm = document.getElementById('admin-magazine-form');
        const adminCancelBtn = document.getElementById('admin-cancel-btn');
        const adminCoverFileName = document.getElementById('admin-cover-file-name');
        
        // PDF Upload
        const pdfUploadContainer = document.getElementById('pdf-upload-container');
        const addPdfBtn = document.getElementById('add-pdf-btn');
        
        // Preview Upload
        const addPreviewPageBtn = document.getElementById('add-preview-page-btn');
        const previewPagesList = document.getElementById('preview-pages-list');
        
        // Preview Modal Elements
        const previewModal = document.getElementById('preview-modal');
        const previewClose = document.getElementById('preview-close');
        const previewPagesContainer = document.getElementById('preview-pages-container');
        const previewSubscribeNow = document.getElementById('preview-subscribe-now');
        const previewMagazineTitle = document.getElementById('preview-magazine-title');
        
        // Flipbook 3D Elements
        const flipbookModal = document.getElementById('flipbook-viewer-modal');
        const flipbookTitle = document.getElementById('flipbook-title');
        const flipbookClose = document.getElementById('flipbook-close');
        const flipbookLoading = document.getElementById('flipbook-loading');
        const flipbookSpread3d = document.getElementById('flipbook-spread-3d');
        const leftPage3d = document.getElementById('left-page-3d');
        const rightPage3d = document.getElementById('right-page-3d');
        const leftPageContent3d = document.getElementById('left-page-content-3d');
        const rightPageContent3d = document.getElementById('right-page-content-3d');
        const leftPageNumber3d = document.getElementById('left-page-number-3d');
        const rightPageNumber3d = document.getElementById('right-page-number-3d');
        const flipbookPrevButton = document.getElementById('flipbook-prev-button');
        const flipbookNextButton = document.getElementById('flipbook-next-button');
        const flipbookCurrentPage = document.getElementById('flipbook-current-page');
        const flipbookTotalPages = document.getElementById('flipbook-total-pages');
        const zoomInBtn = document.getElementById('zoom-in-btn');
        const zoomOutBtn = document.getElementById('zoom-out-btn');
        const zoomLevelElement = document.getElementById('zoom-level');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const singlePageBtn = document.getElementById('single-page-btn');
        const doublePageBtn = document.getElementById('double-page-btn');
        const flipbookHint = document.getElementById('flipbook-hint');
        const loadingProgressFill = document.getElementById('loading-progress-fill');
        
        // Payment Modal
        const paymentModal = document.getElementById('payment-modal');
        const whatsappPaymentBtn = document.getElementById('whatsapp-payment-btn');
        
        // Auth Modal
        const authModal = document.getElementById('auth-modal');
        const loginButton = document.getElementById('login-button');
        const registerButton = document.getElementById('register-button');
        const promptLoginButton = document.getElementById('prompt-login-button');
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        
        // Magazine Display
        const magazinesGrid = document.getElementById('magazines-grid');
        
        // Scroll to top
        const scrollTopButton = document.getElementById('scroll-top');
        
        // Toast container
        const toastContainer = document.getElementById('toast-container');

        // ========== UTILITY FUNCTIONS ==========
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            toastContainer.appendChild(toast);
            
            // Hapus toast setelah 3 detik
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }

        function formatCurrency(amount) {
            return 'Rp ' + parseInt(amount).toLocaleString('id-ID');
        }

        function getMagazineTitleById(id) {
            const magazine = adminMagazines.find(m => m.id === id);
            return magazine ? magazine.title : 'Tidak diketahui';
        }

        function getMagazineIdByTitle(title) {
            const magazine = adminMagazines.find(m => m.title === title);
            return magazine ? magazine.id : null;
        }

        function calculateExpiryDate(packageName) {
            const today = new Date();
            let expiryDate = new Date(today);
            
            switch(packageName) {
                case 'Bulanan':
                    expiryDate.setMonth(today.getMonth() + 1);
                    break;
                case '6 Bulan':
                    expiryDate.setMonth(today.getMonth() + 6);
                    break;
                case 'Tahunan':
                    expiryDate.setFullYear(today.getFullYear() + 1);
                    break;
                default:
                    expiryDate.setMonth(today.getMonth() + 1);
            }
            
            return expiryDate.toISOString().split('T')[0];
        }

        function checkUserSubscription(magazineId = null) {
            // Jika majalah adalah FREE, semua orang bisa akses
            if (magazineId) {
                const magazine = adminMagazines.find(m => m.id === magazineId);
                if (magazine && magazine.accessType === 'free') {
                    return { status: 'free' }; // Kembalikan objek untuk menandakan free
                }
            }
            
            if (!currentUser) return null;
            
            const now = new Date().toISOString().split('T')[0];
            let userSubscriptions = [];
            
            if (magazineId) {
                userSubscriptions = subscribers.filter(sub => 
                    sub.userId === currentUser.id && 
                    sub.magazineId === magazineId &&
                    sub.status === 'confirmed' &&
                    sub.expiryDate >= now
                );
            } else {
                userSubscriptions = subscribers.filter(sub => 
                    sub.userId === currentUser.id && 
                    sub.magazineId === null &&
                    sub.status === 'confirmed' &&
                    sub.expiryDate >= now
                );
            }
            
            if (userSubscriptions.length > 0) {
                return userSubscriptions[0];
            }
            
            return null;
        }

        // ========== PREVIEW FUNCTIONS ==========
        function openPreviewModal(magazine) {
            currentPreviewData = magazine;
            
            // Update judul
            previewMagazineTitle.textContent = `Preview: ${magazine.title}`;
            
            // Kosongkan kontainer preview
            previewPagesContainer.innerHTML = '';
            
            // Tampilkan halaman preview yang tersedia
            if (magazine.previewPages && magazine.previewPages.length > 0) {
                magazine.previewPages.forEach((page, index) => {
                    if (page && page.url) {
                        const pageElement = createPreviewPageElement(page, index + 1);
                        previewPagesContainer.appendChild(pageElement);
                    }
                });
                
                // Tambahkan halaman terkunci untuk sisanya
                const lockedPage = createLockedPreviewPage();
                previewPagesContainer.appendChild(lockedPage);
            } else {
                // Jika tidak ada preview, tampilkan pesan
                previewPagesContainer.innerHTML = `
                    <div style="text-align: center; padding: 50px; width: 100%;">
                        <i class="fas fa-eye-slash" style="font-size: 60px; color: #cbd5e0; margin-bottom: 20px;"></i>
                        <h3 style="color: var(--primary-blue); margin-bottom: 15px;">Preview Tidak Tersedia</h3>
                        <p style="color: var(--dark-gray); max-width: 500px; margin: 0 auto;">
                            Preview untuk majalah ini belum tersedia. Admin dapat menambahkan halaman preview melalui panel admin.
                        </p>
                        <button class="cta-button" style="margin-top: 30px;" id="subscribe-from-preview">Berlangganan Sekarang</button>
                    </div>
                `;
                
                document.getElementById('subscribe-from-preview').addEventListener('click', () => {
                    previewModal.style.display = 'none';
                    openPaymentModal(`Majalah "${magazine.title}"`, magazine.price, magazine.title);
                });
            }
            
            // Tampilkan modal
            previewModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function createPreviewPageElement(pageData, pageNumber) {
            const pageDiv = document.createElement('div');
            pageDiv.className = 'preview-page';
            
            pageDiv.innerHTML = `
                <img src="${pageData.url}" alt="Halaman ${pageNumber}">
                <div class="preview-page-number">Halaman ${pageNumber}</div>
            `;
            
            return pageDiv;
        }
        
        function createLockedPreviewPage() {
            const lockedDiv = document.createElement('div');
            lockedDiv.className = 'preview-locked';
            
            lockedDiv.innerHTML = `
                <i class="fas fa-lock"></i>
                <h4>Halaman Terkunci</h4>
                <p>Berlangganan sekarang untuk membuka semua halaman majalah dan menikmati fitur flipbook 3D!</p>
                <button class="subscribe-btn" id="subscribe-from-locked">
                    <i class="fas fa-unlock"></i> Berlangganan Sekarang
                </button>
            `;
            
            // Event listener untuk tombol berlangganan
            setTimeout(() => {
                document.getElementById('subscribe-from-locked').addEventListener('click', () => {
                    previewModal.style.display = 'none';
                    if (currentPreviewData) {
                        openPaymentModal(`Majalah "${currentPreviewData.title}"`, currentPreviewData.price, currentPreviewData.title);
                    }
                });
            }, 100);
            
            return lockedDiv;
        }

        // ========== FLIPBOOK 3D PRELOADING FUNCTIONS ==========
        function preloadPages3D() {
            if (!pdfDoc || isPreloading) return;
            
            isPreloading = true;
            
            // Halaman yang akan di-preload
            let pagesToPreload = [];
            
            if (isDoublePageMode) {
                // Untuk double page, preload 4 halaman ke depan
                for (let i = currentPage; i <= Math.min(totalPages, currentPage + 4); i++) {
                    if (!renderedPages[i] || renderedPages[i] === 'rendering') {
                        pagesToPreload.push(i);
                    }
                }
            } else {
                // Untuk single page, preload 2 halaman ke depan
                for (let i = currentPage; i <= Math.min(totalPages, currentPage + 2); i++) {
                    if (!renderedPages[i] || renderedPages[i] === 'rendering') {
                        pagesToPreload.push(i);
                    }
                }
            }
            
            // Preload halaman-halaman tersebut
            preloadPagesInQueue(pagesToPreload);
        }

        function preloadPagesInQueue(pages) {
            if (pages.length === 0) {
                isPreloading = false;
                return;
            }
            
            const pageNum = pages.shift();
            
            // Jika halaman sudah dirender, lewati
            if (renderedPages[pageNum] && renderedPages[pageNum] !== 'rendering') {
                preloadPagesInQueue(pages);
                return;
            }
            
            renderPageToCache(pageNum).then(() => {
                // Update progress bar
                const progress = Object.keys(renderedPages).filter(k => renderedPages[k] && renderedPages[k] !== 'rendering').length / totalPages * 90 + 10;
                loadingProgressFill.style.width = `${progress}%`;
                
                // Lanjut ke halaman berikutnya dalam antrian
                setTimeout(() => preloadPagesInQueue(pages), 50);
            });
        }

        function renderPageToCache(pageNum) {
            if (!pdfDoc || pageNum > totalPages || pageNum < 1) return Promise.resolve();
            
            // Jika sudah di-cache, langsung return
            if (renderedPages[pageNum] && renderedPages[pageNum] !== 'rendering') {
                return Promise.resolve(renderedPages[pageNum]);
            }
            
            // Jika sedang di-render, tunggu
            if (renderedPages[pageNum] === 'rendering') {
                return new Promise((resolve) => {
                    const checkInterval = setInterval(() => {
                        if (renderedPages[pageNum] && renderedPages[pageNum] !== 'rendering') {
                            clearInterval(checkInterval);
                            resolve(renderedPages[pageNum]);
                        }
                    }, 100);
                });
            }
            
            // Tandai sedang di-render
            renderedPages[pageNum] = 'rendering';
            
            return pdfDoc.getPage(pageNum).then(page => {
                const viewport = page.getViewport({ scale: 2.0 });
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                const renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                
                return page.render(renderContext).promise.then(() => {
                    // Simpan ke cache dengan kualitas lebih tinggi
                    renderedPages[pageNum] = canvas.toDataURL('image/jpeg', 0.9);
                    return renderedPages[pageNum];
                });
            }).catch(error => {
                console.error(`Error rendering page ${pageNum}:`, error);
                renderedPages[pageNum] = null;
                return null;
            });
        }

        function renderPageToElement3D(pageNum, element) {
            if (!pdfDoc || pageNum > totalPages || pageNum < 1) return;
            
            // Gunakan cache jika sudah ada
            if (renderedPages[pageNum] && renderedPages[pageNum] !== 'rendering') {
                displayPageFromCache(pageNum, element);
                return;
            }
            
            // Jika belum di-cache, render dulu
            renderPageToCache(pageNum).then(() => {
                if (renderedPages[pageNum] && renderedPages[pageNum] !== 'rendering') {
                    displayPageFromCache(pageNum, element);
                }
            });
        }

        function displayPageFromCache(pageNum, element) {
            if (!renderedPages[pageNum] || renderedPages[pageNum] === 'rendering') return;
            
            // Hapus konten lama
            while (element.firstChild) {
                element.removeChild(element.firstChild);
            }
            
            const img = document.createElement('img');
            img.src = renderedPages[pageNum];
            img.alt = `Halaman ${pageNum}`;
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.objectFit = 'contain';
            img.style.opacity = '0';
            img.style.transition = 'opacity 0.3s ease';
            
            element.appendChild(img);
            
            // Fade in
            setTimeout(() => {
                img.style.opacity = '1';
            }, 10);
        }

        function renderInitialPages3D() {
            if (isDoublePageMode) {
                // Double page mode
                if (currentPage === 1) {
                    // First page - only right page
                    leftPage3d.style.display = 'none';
                    rightPage3d.style.width = '100%';
                    rightPage3d.style.borderRadius = '5px';
                    
                    renderPageToElement3D(currentPage, rightPageContent3d);
                    rightPageNumber3d.textContent = currentPage;
                    leftPageNumber3d.textContent = '';
                } else {
                    // Even-odd pages
                    const leftPageNum = currentPage % 2 === 0 ? currentPage : currentPage - 1;
                    const rightPageNum = currentPage % 2 === 0 ? currentPage + 1 : currentPage;
                    
                    leftPage3d.style.display = 'flex';
                    leftPage3d.style.width = '50%';
                    rightPage3d.style.width = '50%';
                    rightPage3d.style.borderRadius = '0 5px 5px 0';
                    
                    renderPageToElement3D(leftPageNum, leftPageContent3d);
                    leftPageNumber3d.textContent = leftPageNum;
                    
                    if (rightPageNum <= totalPages) {
                        renderPageToElement3D(rightPageNum, rightPageContent3d);
                        rightPageNumber3d.textContent = rightPageNum;
                    } else {
                        // No right page
                        rightPageContent3d.innerHTML = '<div style="text-align: center; padding: 50px; color: #666;"><i class="fas fa-book" style="font-size: 48px;"></i><p>Halaman akhir</p></div>';
                        rightPageNumber3d.textContent = '';
                    }
                }
            } else {
                // Single page mode
                leftPage3d.style.display = 'none';
                rightPage3d.style.width = '100%';
                rightPage3d.style.borderRadius = '5px';
                
                renderPageToElement3D(currentPage, rightPageContent3d);
                rightPageNumber3d.textContent = currentPage;
                leftPageNumber3d.textContent = '';
            }
            
            // Preload halaman berikutnya
            setTimeout(() => {
                preloadPages3D();
            }, 100);
            
            // Hide loading and show flipbook
            setTimeout(() => {
                flipbookLoading.style.display = 'none';
                flipbookSpread3d.style.display = 'flex';
                loadingProgressFill.style.width = '100%';
                
                // Update read count
                updateReadCount3D();
            }, 500);
        }

        function goToPrevPage3D() {
            if (isFlipping || currentPage <= 1) return;
            
            isFlipping = true;
            
            if (isDoublePageMode) {
                if (currentPage === 2) {
                    // Back to page 1 (only right page)
                    animatePageFlip3D('left', () => {
                        currentPage = 1;
                        renderInitialPages3D();
                        updatePageInfo3D();
                        updateNavigationButtons3D();
                        isFlipping = false;
                    });
                } else {
                    // Go back two pages
                    animatePageFlip3D('left', () => {
                        currentPage = Math.max(1, currentPage - 2);
                        renderInitialPages3D();
                        updatePageInfo3D();
                        updateNavigationButtons3D();
                        isFlipping = false;
                    });
                }
            } else {
                // Single page mode
                animatePageFlip3D('left', () => {
                    currentPage--;
                    renderInitialPages3D();
                    updatePageInfo3D();
                    updateNavigationButtons3D();
                    isFlipping = false;
                });
            }
        }

        function goToNextPage3D() {
            if (isFlipping || currentPage >= totalPages) return;
            
            isFlipping = true;
            
            if (isDoublePageMode) {
                if (currentPage === 1) {
                    // From page 1 to page 2-3
                    animatePageFlip3D('right', () => {
                        currentPage = 2;
                        renderInitialPages3D();
                        updatePageInfo3D();
                        updateNavigationButtons3D();
                        isFlipping = false;
                    });
                } else {
                    // Go forward two pages
                    animatePageFlip3D('right', () => {
                        currentPage = Math.min(totalPages, currentPage + 2);
                        renderInitialPages3D();
                        updatePageInfo3D();
                        updateNavigationButtons3D();
                        isFlipping = false;
                    });
                }
            } else {
                // Single page mode
                animatePageFlip3D('right', () => {
                    currentPage++;
                    renderInitialPages3D();
                    updatePageInfo3D();
                    updateNavigationButtons3D();
                    isFlipping = false;
                });
            }
        }

        function animatePageFlip3D(direction, callback) {
            const pageToFlip = direction === 'right' ? rightPage3d : leftPage3d;
            const flipDirection = direction === 'right' ? -180 : 180;
            
            // Add flipping class dengan transform
            pageToFlip.style.transform = `rotateY(${flipDirection}deg)`;
            pageToFlip.style.transition = 'transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
            pageToFlip.classList.add('flipping');
            
            // Set timeout untuk animasi
            setTimeout(() => {
                pageToFlip.style.transform = '';
                pageToFlip.style.transition = '';
                pageToFlip.classList.remove('flipping');
                
                // Preload halaman berikutnya setelah flip
                setTimeout(() => {
                    preloadPages3D();
                }, 100);
                
                if (callback) callback();
            }, 800);
        }

        // ========== LOADING SCREEN FUNCTIONS ==========
        function simulateLoading() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    loadingText.textContent = 'Selesai! Memulai aplikasi...';
                    
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                        initApp();
                    }, 500);
                }
                
                loadingProgressBar.style.width = `${progress}%`;
                
                if (progress < 30) {
                    loadingText.textContent = 'Memuat komponen aplikasi...';
                } else if (progress < 60) {
                    loadingText.textContent = 'Menyiapkan database...';
                } else if (progress < 90) {
                    loadingText.textContent = 'Menginisialisasi flipbook...';
                }
            }, 150);
        }

        // ========== MAIN APPLICATION INITIALIZATION ==========
        function initApp() {
            // Check if admin is logged in
            const isAdminLoggedIn = localStorage.getItem('adminLoggedIn');
            const adminUser = JSON.parse(localStorage.getItem('adminUser'));
            
            if (isAdminLoggedIn === 'true' && adminUser) {
                showAdminPanel();
            } else {
                showMainWebsite();
            }
            
            // Initialize main website functionality
            initMainWebsite();
            
            // Initialize admin login functionality
            initAdminLogin();
            
            // Initialize flipbook 3D functionality
            initFlipbook3D();
            
            // Initialize preview functionality
            initPreview();
            
            // Initialize admin panel if needed
            if (isAdminLoggedIn === 'true' && adminUser) {
                initAdminPanel();
            }
            
            // Initialize scroll to top button
            initScrollToTop();
            
            // Show welcome message
            setTimeout(() => {
                showToast('Selamat datang di E-Majalah Al Haromain!', 'info');
            }, 1000);
            
            // Check URL for admin access
            checkAdminURL();
        }
        
        function checkAdminURL() {
            // Check if URL contains admin parameter
            const urlParams = new URLSearchParams(window.location.search);
            const adminParam = urlParams.get('admin');
            
            if (adminParam === 'login') {
                // Show admin login page
                showAdminLogin();
            }
        }

        function initScrollToTop() {
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    scrollTopButton.classList.add('visible');
                } else {
                    scrollTopButton.classList.remove('visible');
                }
            });
            
            scrollTopButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // ========== PAGE DISPLAY FUNCTIONS ==========
        function showAdminLogin() {
            adminLoginContainer.style.display = 'flex';
            adminPanel.style.display = 'none';
            mainWebsite.style.display = 'none';
        }

        function showAdminPanel() {
            adminLoginContainer.style.display = 'none';
            adminPanel.style.display = 'flex';
            mainWebsite.style.display = 'none';
        }

        function showMainWebsite() {
            adminLoginContainer.style.display = 'none';
            adminPanel.style.display = 'none';
            mainWebsite.style.display = 'block';
            updateUI();
        }

        // ========== PREVIEW INITIALIZATION ==========
        function initPreview() {
            // Event listeners untuk preview modal
            previewClose.addEventListener('click', () => {
                previewModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            previewSubscribeNow.addEventListener('click', () => {
                previewModal.style.display = 'none';
                if (currentPreviewData) {
                    openPaymentModal(`Majalah "${currentPreviewData.title}"`, currentPreviewData.price, currentPreviewData.title);
                }
            });
            
            // Event listener untuk menutup modal dengan klik di luar
            previewModal.addEventListener('click', (e) => {
                if (e.target === previewModal) {
                    previewModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
        }

        // ========== MAIN WEBSITE FUNCTIONS ==========
        function initMainWebsite() {
            // Event Listeners untuk Auth Modal
            loginButton.addEventListener('click', () => {
                authModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });

            registerButton.addEventListener('click', () => {
                authModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                registerTab.click();
            });

            promptLoginButton.addEventListener('click', () => {
                authModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });

            // Auth Tab Switching
            loginTab.addEventListener('click', () => {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
                document.getElementById('auth-modal-title').textContent = 'Masuk ke Akun Anda';
            });

            registerTab.addEventListener('click', () => {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.classList.add('active');
                loginForm.classList.remove('active');
                document.getElementById('auth-modal-title').textContent = 'Daftar Akun Baru';
            });

            // Auth Form Submissions
            loginForm.addEventListener('submit', handleLogin);
            registerForm.addEventListener('submit', handleRegister);

            // FAQ Toggle
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', () => {
                    const answer = question.nextElementSibling;
                    const toggle = question.querySelector('.faq-toggle');
                    
                    answer.classList.toggle('active');
                    toggle.classList.toggle('active');
                });
            });

            // Newsletter Form
            document.querySelector('.newsletter-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = e.target.querySelector('input').value;
                showToast(`Terima kasih ${email} telah berlangganan newsletter!`, 'success');
                e.target.reset();
            });

            // Smooth Scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    if (this.getAttribute('href') === '#') return;
                    
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        // Update active nav
                        document.querySelectorAll('nav a').forEach(navLink => {
                            navLink.classList.remove('active');
                        });
                        this.classList.add('active');
                        
                        // Scroll to target
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Event listeners untuk berlangganan paket
            document.querySelectorAll('.subscribe-package').forEach(button => {
                button.addEventListener('click', (e) => {
                    const packageName = e.target.getAttribute('data-package');
                    const packagePrice = e.target.getAttribute('data-price');
                    
                    openPaymentModal(packageName, packagePrice);
                });
            });

            // Modal close buttons
            document.querySelectorAll('.close-modal').forEach(close => {
                close.addEventListener('click', () => {
                    close.closest('.modal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            });

            // Display magazines from admin
            displayMagazinesFromAdmin();

            // Display comments
            displayComments();
            
            // WhatsApp payment button
            whatsappPaymentBtn.addEventListener('click', processWhatsAppPayment);
            
            // Event listener untuk tombol pratinjau (dengan event delegation)
            document.addEventListener('click', function(e) {
                if (e.target.closest('.preview-button')) {
                    const magazineId = parseInt(e.target.closest('.preview-button').getAttribute('data-id'));
                    const magazine = adminMagazines.find(m => m.id === magazineId);
                    
                    if (magazine) {
                        // Cek apakah user sudah berlangganan
                        const userSubscription = checkUserSubscription(magazine.id);
                        const isFree = magazine.accessType === 'free';
                        
                        if (isFree || userSubscription) {
                            // Jika gratis atau sudah berlangganan, buka flipbook full
                            if (magazine.pdfUrl) {
                                openFlipbook3D(magazine);
                            } else {
                                showToast('File PDF tidak tersedia untuk majalah ini.', 'error');
                            }
                        } else {
                            // Jika belum berlangganan, buka preview
                            openPreviewModal(magazine);
                        }
                    }
                }
            });
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                authModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                updateUI();
                showToast(`Selamat datang, ${user.name}!`, 'success');
            } else {
                showToast('Email atau password salah!', 'error');
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            if (password.length < 6) {
                showToast('Password harus minimal 6 karakter!', 'error');
                return;
            }
            
            if (password !== confirm) {
                showToast('Konfirmasi password tidak sesuai!', 'error');
                return;
            }
            
            if (users.find(u => u.email === email)) {
                showToast('Email sudah terdaftar!', 'error');
                return;
            }
            
            const user = {
                id: Date.now(),
                name: name,
                email: email,
                password: password
            };
            
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users));
            
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            updateUI();
            showToast('Pendaftaran berhasil! Selamat datang di E-Majalah Al Haromain.', 'success');
        }

        function updateUI() {
            if (currentUser) {
                document.getElementById('user-auth').innerHTML = `
                    <div class="user-info">
                        <div class="user-avatar">${currentUser.name.charAt(0).toUpperCase()}</div>
                        <div class="user-details">
                            <div class="user-name">Halo, ${currentUser.name}</div>
                            <div class="user-email">${currentUser.email}</div>
                        </div>
                        <button class="logout-button" id="logout-button">
                            <i class="fas fa-sign-out-alt"></i> Keluar
                        </button>
                    </div>
                `;
                
                // Tampilkan form komentar
                document.getElementById('comment-form-container').innerHTML = `
                    <div class="comment-form-container">
                        <h3>Berikan Komentar Anda</h3>
                        <form id="comment-form">
                            <div class="form-group">
                                <label for="comment-type">Jenis Komentar</label>
                                <select id="comment-type" required>
                                    <option value="">Pilih jenis komentar</option>
                                    <option value="penilaian">Penilaian Penggunaan</option>
                                    <option value="saran">Saran</option>
                                    <option value="masukan">Masukan</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Rating</label>
                                <div class="rating-stars" id="rating-stars">
                                    <span class="star" data-value="1"></span>
                                    <span class="star" data-value="2"></span>
                                    <span class="star" data-value="3"></span>
                                    <span class="star" data-value="4"></span>
                                    <span class="star" data-value="5"></span>
                                </div>
                                <input type="hidden" id="rating-value" value="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="comment-text">Komentar</label>
                                <textarea id="comment-text" placeholder="Tulis komentar Anda di sini..." required></textarea>
                            </div>
                            
                            <button type="submit" class="submit-comment">Kirim Komentar</button>
                        </form>
                    </div>
                `;
                
                // Event listener untuk form komentar
                document.getElementById('comment-form').addEventListener('submit', submitComment);
                
                // Event listener untuk bintang rating
                document.querySelectorAll('.star').forEach(star => {
                    star.addEventListener('click', setRating);
                });
                
                // Event listener untuk logout
                document.getElementById('logout-button').addEventListener('click', logout);
                
                // Refresh tampilan majalah untuk menampilkan status langganan
                displayMagazinesFromAdmin();
            }
        }

        function setRating(e) {
            const rating = parseInt(e.target.getAttribute('data-value'));
            document.getElementById('rating-value').value = rating;
            
            // Update tampilan bintang
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitComment(e) {
            e.preventDefault();
            
            const type = document.getElementById('comment-type').value;
            const rating = parseInt(document.getElementById('rating-value').value);
            const text = document.getElementById('comment-text').value;
            
            if (rating === 0) {
                showToast('Silakan berikan rating terlebih dahulu', 'warning');
                return;
            }
            
            if (!type) {
                showToast('Silakan pilih jenis komentar', 'warning');
                return;
            }
            
            const comment = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.name,
                type: type,
                rating: rating,
                text: text,
                date: new Date().toLocaleDateString('id-ID')
            };
            
            comments.push(comment);
            localStorage.setItem('comments', JSON.stringify(comments));
            
            // Reset form
            document.getElementById('comment-form').reset();
            document.getElementById('rating-value').value = 0;
            
            // Reset bintang
            document.querySelectorAll('.star').forEach(star => {
                star.classList.remove('active');
            });
            
            // Tampilkan komentar baru
            displayComments();
            
            showToast('Komentar Anda berhasil dikirim!', 'success');
        }

        function displayComments() {
            const commentsList = document.getElementById('comments-list');
            commentsList.innerHTML = '';
            
            if (comments.length === 0) {
                commentsList.innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <i class="fas fa-comments" style="font-size: 50px; color: var(--medium-gray); margin-bottom: 20px;"></i>
                        <p style="color: var(--dark-gray); font-size: 18px;">Belum ada komentar. Jadilah yang pertama memberikan komentar!</p>
                    </div>
                `;
                return;
            }
            
            // Urutkan komentar dari yang terbaru
            const sortedComments = [...comments].sort((a, b) => b.id - a.id);
            
            sortedComments.forEach(comment => {
                const commentCard = document.createElement('div');
                commentCard.className = 'comment-card';
                
                // Tentukan label untuk jenis komentar
                let typeLabel = '';
                if (comment.type === 'saran') typeLabel = 'Saran';
                else if (comment.type === 'penilaian') typeLabel = 'Penilaian';
                else if (comment.type === 'masukan') typeLabel = 'Masukan';
                
                // Tampilkan bintang rating
                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= comment.rating) {
                        starsHtml += '<span style="color: var(--accent-gold);"></span>';
                    } else {
                        starsHtml += '<span style="color: #e2e8f0;"></span>';
                    }
                }
                
                commentCard.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-author">
                            <div class="comment-avatar">${comment.userName.charAt(0).toUpperCase()}</div>
                            <div class="author-info">
                                <h4>${comment.userName}</h4>
                                <div class="comment-rating">${starsHtml}</div>
                            </div>
                        </div>
                        <div class="comment-date">${comment.date}</div>
                    </div>
                    <div class="comment-text">${comment.text}</div>
                    <div class="comment-type ${comment.type}">${typeLabel}</div>
                `;
                
                commentsList.appendChild(commentCard);
            });
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUI();
            showToast('Anda telah berhasil keluar.', 'info');
        }

        function displayMagazinesFromAdmin() {
            magazinesGrid.innerHTML = '';
            
            if (adminMagazines.length === 0) {
                magazinesGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 50px;">
                        <i class="fas fa-book-open" style="font-size: 60px; color: var(--accent-gold); margin-bottom: 20px;"></i>
                        <h3 style="color: var(--primary-blue); margin-bottom: 15px;">Belum ada majalah tersedia</h3>
                        <p style="color: var(--dark-gray); max-width: 500px; margin: 0 auto;">Admin dapat mengupload majalah melalui panel admin. Akses panel admin melalui URL khusus.</p>
                    </div>
                `;
                return;
            }
            
            // Urutkan majalah berdasarkan tanggal terbaru
            const sortedMagazines = [...adminMagazines].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedMagazines.forEach((magazine, index) => {
                const magazineCard = document.createElement('div');
                magazineCard.className = 'magazine-card';
                magazineCard.style.animationDelay = `${index * 0.1}s`;
                
                // Gunakan gambar placeholder jika coverUrl tidak ada
                const coverImage = magazine.coverUrl || 'https://via.placeholder.com/400x500/1a365d/ffffff?text=Cover+Majalah';
                
                // Cek status akses majalah
                const isFree = magazine.accessType === 'free';
                const userSubscription = checkUserSubscription(magazine.id);
                const hasSubscription = userSubscription !== null;
                
                // Tentukan tombol yang akan ditampilkan
                let actionButton;
                let statusBadge = '';
                
                if (isFree) {
                    // Majalah gratis - semua bisa akses
                    actionButton = `<button class="action-button read-button" data-id="${magazine.id}">
                        <i class="fas fa-book-open"></i> Baca Gratis
                    </button>`;
                    statusBadge = '<div class="subscription-status free" style="margin-top: 15px;">Gratis</div>';
                } else if (hasSubscription) {
                    // User sudah berlangganan
                    actionButton = `<button class="action-button read-button" data-id="${magazine.id}">
                        <i class="fas fa-book-open"></i> Baca Majalah
                    </button>`;
                    statusBadge = `<div class="subscription-status active" style="margin-top: 15px;">Langganan Aktif</div>`;
                } else {
                    // Premium - belum berlangganan
                    actionButton = `<button class="action-button subscribe-button" data-id="${magazine.id}" data-price="${magazine.price}" data-title="${magazine.title}">
                        <i class="fas fa-shopping-cart"></i> Langganan
                    </button>`;
                }
                
                // Tampilkan tombol preview untuk semua pengguna (kecuali yang sudah bisa baca)
                const showPreview = !isFree && !hasSubscription;
                const previewButton = showPreview ? 
                    `<button class="action-button preview-button" data-id="${magazine.id}">
                        <i class="fas fa-eye"></i> Pratinjau
                    </button>` : '';
                
                // Tampilkan badge jika ada preview
                const previewBadge = magazine.previewPages && magazine.previewPages.length > 0 ? 
                    '<span style="display: inline-block; background-color: #4299e1; color: white; padding: 3px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; margin-left: 8px;">Preview Tersedia</span>' : '';
                
                magazineCard.innerHTML = `
                    <div class="magazine-cover-container">
                        <img src="${coverImage}" alt="${magazine.title}" class="magazine-cover">
                        <div class="magazine-overlay">
                            <div class="magazine-price ${isFree ? 'free' : ''}">${isFree ? 'GRATIS' : formatCurrency(magazine.price)}</div>
                        </div>
                    </div>
                    <div class="magazine-info">
                        <h3 class="magazine-title">${magazine.title} ${previewBadge}</h3>
                        <p class="magazine-date">
                            <i class="far fa-calendar-alt"></i> ${formatDate(magazine.date)}
                        </p>
                        <p class="magazine-description">${magazine.description || 'Majalah islami berkualitas dengan konten inspiratif.'}</p>
                        <div class="magazine-actions">
                            ${showPreview ? previewButton : ''}
                            ${actionButton}
                        </div>
                        ${statusBadge}
                    </div>
                `;
                
                magazinesGrid.appendChild(magazineCard);
            });
            
            // Event listener untuk tombol baca
            document.querySelectorAll('.read-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const magazineId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    const magazine = adminMagazines.find(m => m.id === magazineId);
                    
                    if (magazine) {
                        const isFree = magazine.accessType === 'free';
                        const userSubscription = checkUserSubscription(magazine.id);
                        
                        if (isFree || userSubscription) {
                            if (magazine.pdfUrl) {
                                openFlipbook3D(magazine);
                            } else {
                                showToast('File PDF tidak tersedia untuk majalah ini.', 'error');
                            }
                        } else {
                            showToast('Silakan berlangganan terlebih dahulu.', 'warning');
                        }
                    }
                });
            });
            
            // Event listener untuk tombol langganan
            document.querySelectorAll('.subscribe-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const magazineId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    const magazinePrice = e.target.closest('button').getAttribute('data-price');
                    const magazineTitle = e.target.closest('button').getAttribute('data-title');
                    
                    openPaymentModal(`Majalah "${magazineTitle}"`, magazinePrice, magazineTitle);
                });
            });
        }

        // ========== PAYMENT FUNCTIONS ==========
        function openPaymentModal(packageName, packagePrice, magazineTitle = null) {
            // Simpan data pembayaran
            currentPaymentData = {
                packageName: packageName,
                packagePrice: packagePrice,
                magazineTitle: magazineTitle,
                type: magazineTitle ? 'single' : 'package'
            };
            
            // Update informasi di modal
            document.getElementById('payment-package-name').textContent = packageName;
            document.getElementById('payment-package-price').textContent = formatCurrency(packagePrice);
            
            if (magazineTitle) {
                document.getElementById('payment-magazine-title').style.display = 'block';
                document.getElementById('payment-magazine-title').querySelector('span').textContent = magazineTitle;
            } else {
                document.getElementById('payment-magazine-title').style.display = 'none';
            }
            
            // Tampilkan modal
            paymentModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function processWhatsAppPayment() {
            if (!currentUser) {
                showToast('Silakan login terlebih dahulu!', 'error');
                paymentModal.style.display = 'none';
                authModal.style.display = 'flex';
                return;
            }
            
            if (!currentPaymentData) {
                showToast('Data pembayaran tidak valid!', 'error');
                return;
            }
            
            // Buat pesan WhatsApp
            let message = `Halo Admin Al Haromain, saya ingin berlangganan `;
            
            if (currentPaymentData.type === 'single') {
                message += `majalah "${currentPaymentData.magazineTitle}" `;
            } else {
                message += `paket ${currentPaymentData.packageName} `;
            }
            
            message += `dengan harga ${formatCurrency(currentPaymentData.packagePrice)}. `;
            message += `\n\nData saya:\n`;
            message += `Nama: ${currentUser.name}\n`;
            message += `Email: ${currentUser.email}\n\n`;
            message += `Mohon informasi cara pembayarannya. Terima kasih.`;
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/6285852891008?text=${encodedMessage}`;
            
            // Tambah data pelanggan dengan status pending
            const subscription = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.name,
                userEmail: currentUser.email,
                package: currentPaymentData.packageName,
                magazineId: currentPaymentData.type === 'single' ? getMagazineIdByTitle(currentPaymentData.magazineTitle) : null,
                price: currentPaymentData.packagePrice,
                subscriptionDate: new Date().toISOString().split('T')[0],
                status: 'pending',
                expiryDate: calculateExpiryDate(currentPaymentData.packageName)
            };
            
            subscribers.push(subscription);
            localStorage.setItem('subscribers', JSON.stringify(subscribers));
            
            // Update dashboard admin
            updateAdminDashboard();
            
            // Tutup modal dan buka WhatsApp
            paymentModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            window.open(whatsappUrl, '_blank');
            
            showToast('Anda akan diarahkan ke WhatsApp. Silakan ikuti instruksi untuk menyelesaikan pembayaran.', 'info');
        }

        // ========== FLIPBOOK 3D FUNCTIONS ==========
        function initFlipbook3D() {
            // Event listener untuk menutup modal
            flipbookClose.addEventListener('click', closeFlipbook3D);
            
            // Event listener untuk navigasi
            flipbookPrevButton.addEventListener('click', goToPrevPage3D);
            flipbookNextButton.addEventListener('click', goToNextPage3D);
            
            // Event listener untuk zoom
            zoomInBtn.addEventListener('click', zoomIn3D);
            zoomOutBtn.addEventListener('click', zoomOut3D);
            
            // Event listener untuk fullscreen
            fullscreenBtn.addEventListener('click', toggleFullscreen3D);
            
            // Event listener untuk mode tampilan
            singlePageBtn.addEventListener('click', () => switchViewMode3D(false));
            doublePageBtn.addEventListener('click', () => switchViewMode3D(true));
            
            // Event listener untuk keyboard navigation
            document.addEventListener('keydown', handleKeyboardNavigation3D);
            
            // Event listener untuk menutup modal dengan klik di luar
            flipbookModal.addEventListener('click', (e) => {
                if (e.target === flipbookModal) {
                    closeFlipbook3D();
                }
            });
            
            // Event listener untuk resize window
            window.addEventListener('resize', handleWindowResize3D);
            
            // Initialize drag events
            initDragEvents3D();
            
            // Handle fullscreen change
            document.addEventListener('fullscreenchange', handleFullscreenChange3D);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange3D);
            document.addEventListener('msfullscreenchange', handleFullscreenChange3D);
        }

        function initDragEvents3D() {
            // Mouse events
            leftPage3d.addEventListener('mousedown', startDrag3D);
            rightPage3d.addEventListener('mousedown', startDrag3D);
            
            // Touch events
            leftPage3d.addEventListener('touchstart', startDragTouch3D, { passive: false });
            rightPage3d.addEventListener('touchstart', startDragTouch3D, { passive: false });
            
            // Global mouse/touch events
            document.addEventListener('mousemove', doDrag3D);
            document.addEventListener('mouseup', endDrag3D);
            document.addEventListener('touchmove', doDragTouch3D, { passive: false });
            document.addEventListener('touchend', endDragTouch3D);
        }

        function startDrag3D(e) {
            if (isFlipping) return;
            
            isDragging = true;
            dragStartX = e.clientX;
            dragStartTime = Date.now();
            dragVelocity = 0;
            dragDirection = null;
            
            // Tambahkan efek visual
            const page = e.target.closest('.page-3d');
            if (page) {
                page.classList.add('dragging');
            }
            
            e.preventDefault();
        }

        function startDragTouch3D(e) {
            if (isFlipping || e.touches.length !== 1) return;
            
            isDragging = true;
            dragStartX = e.touches[0].clientX;
            dragStartTime = Date.now();
            dragVelocity = 0;
            dragDirection = null;
            
            // Tambahkan efek visual
            const page = e.target.closest('.page-3d');
            if (page) {
                page.classList.add('dragging');
            }
            
            e.preventDefault();
        }

        function doDrag3D(e) {
            if (!isDragging) return;
            
            dragCurrentX = e.clientX;
            const dx = dragCurrentX - dragStartX;
            
            // Update velocity
            const elapsedTime = Date.now() - dragStartTime;
            dragVelocity = dx / Math.max(1, elapsedTime);
            
            // Determine direction
            dragDirection = dx > 0 ? 'right' : 'left';
            
            // Apply visual feedback
            applyDragTransform3D(dx);
            
            e.preventDefault();
        }

        function doDragTouch3D(e) {
            if (!isDragging || e.touches.length !== 1) return;
            
            dragCurrentX = e.touches[0].clientX;
            const dx = dragCurrentX - dragStartX;
            
            // Update velocity
            const elapsedTime = Date.now() - dragStartTime;
            dragVelocity = dx / Math.max(1, elapsedTime);
            
            // Determine direction
            dragDirection = dx > 0 ? 'right' : 'left';
            
            // Apply visual feedback
            applyDragTransform3D(dx);
            
            e.preventDefault();
        }

        function applyDragTransform3D(dx) {
            const maxDrag = 150;
            const clampedDx = Math.max(-maxDrag, Math.min(maxDrag, dx));
            const rotation = (clampedDx / maxDrag) * 30;
            
            if (dragDirection === 'right' && currentPage > 1) {
                // Drag ke kanan untuk halaman sebelumnya
                if (isDoublePageMode) {
                    if (currentPage > 2) {
                        leftPage3d.style.transform = `rotateY(${Math.max(0, rotation)}deg)`;
                    }
                } else {
                    rightPage3d.style.transform = `rotateY(${Math.max(0, rotation)}deg)`;
                }
            } else if (dragDirection === 'left' && currentPage < totalPages) {
                // Drag ke kiri untuk halaman berikutnya
                rightPage3d.style.transform = `rotateY(${Math.min(0, rotation)}deg)`;
            }
        }

        function endDrag3D(e) {
            if (!isDragging) return;
            
            isDragging = false;
            
            // Reset transform
            leftPage3d.style.transform = '';
            rightPage3d.style.transform = '';
            
            // Remove dragging class
            leftPage3d.classList.remove('dragging');
            rightPage3d.classList.remove('dragging');
            
            // Calculate end position
            const endX = e.clientX || dragCurrentX;
            const dx = endX - dragStartX;
            
            // Check if drag is sufficient or fast swipe
            const isDragSufficient = Math.abs(dx) > DRAG_THRESHOLD;
            const isFastSwipe = Math.abs(dragVelocity) > MIN_SWIPE_VELOCITY;
            
            // Trigger page turn
            if (isDragSufficient || isFastSwipe) {
                if (dragDirection === 'right' && currentPage > 1) {
                    goToPrevPage3D();
                } else if (dragDirection === 'left' && currentPage < totalPages) {
                    goToNextPage3D();
                }
            }
            
            // Reset variables
            dragStartX = 0;
            dragCurrentX = 0;
            dragVelocity = 0;
            dragDirection = null;
        }

        function endDragTouch3D(e) {
            if (!isDragging) return;
            
            isDragging = false;
            
            // Reset transform
            leftPage3d.style.transform = '';
            rightPage3d.style.transform = '';
            
            // Remove dragging class
            leftPage3d.classList.remove('dragging');
            rightPage3d.classList.remove('dragging');
            
            // Calculate end position
            let endX = dragCurrentX;
            if (e.changedTouches && e.changedTouches.length > 0) {
                endX = e.changedTouches[0].clientX;
            }
            const dx = endX - dragStartX;
            
            // Check if drag is sufficient or fast swipe
            const isDragSufficient = Math.abs(dx) > DRAG_THRESHOLD;
            const isFastSwipe = Math.abs(dragVelocity) > MIN_SWIPE_VELOCITY;
            
            // Trigger page turn
            if (isDragSufficient || isFastSwipe) {
                if (dragDirection === 'right' && currentPage > 1) {
                    goToPrevPage3D();
                } else if (dragDirection === 'left' && currentPage < totalPages) {
                    goToNextPage3D();
                }
            }
            
            // Reset variables
            dragStartX = 0;
            dragCurrentX = 0;
            dragVelocity = 0;
            dragDirection = null;
        }

        function openFlipbook3D(magazine) {
            // Cek jika majalah gratis atau user punya akses
            const isFree = magazine.accessType === 'free';
            const userSubscription = checkUserSubscription(magazine.id);
            
            if (!isFree && !userSubscription) {
                // Jika bukan free dan belum berlangganan, tampilkan preview
                if (magazine.previewPages && magazine.previewPages.length > 0) {
                    openPreviewModal(magazine);
                    showToast('Silakan berlangganan untuk mengakses majalah lengkap.', 'info');
                } else {
                    showToast('Silakan berlangganan untuk mengakses majalah ini.', 'warning');
                    openPaymentModal(`Majalah "${magazine.title}"`, magazine.price, magazine.title);
                }
                return;
            }
            
            currentFlipbookData = magazine;
            
            // Reset state
            currentPage = 1;
            flipbookZoom = 1;
            isFlipping = false;
            pdfDoc = null;
            renderedPages = {};
            
            // Reset drag state
            isDragging = false;
            dragStartX = 0;
            dragCurrentX = 0;
            dragVelocity = 0;
            dragDirection = null;
            
            // Update title
            flipbookTitle.textContent = `Membaca: ${magazine.title}`;
            
            // Reset display
            flipbookSpread3d.style.transform = 'scale(1)';
            zoomLevelElement.textContent = '100%';
            
            // Reset view mode
            isDoublePageMode = true;
            singlePageBtn.classList.remove('active');
            doublePageBtn.classList.add('active');
            flipbookSpread3d.parentElement.classList.remove('single-page-mode');
            
            // Show loading
            flipbookLoading.style.display = 'flex';
            flipbookSpread3d.style.display = 'none';
            loadingProgressFill.style.width = '0%';
            
            // Show modal
            flipbookModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Load PDF
            loadPDFForFlipbook3D(magazine.pdfUrl);
            
            // Show hint
            setTimeout(() => {
                flipbookHint.style.animation = 'none';
                flipbookHint.offsetHeight;
                flipbookHint.style.animation = 'fadeInOutHint 5s ease-in-out';
            }, 500);
        }

        function loadPDFForFlipbook3D(pdfUrl) {
            loadingProgressFill.style.width = '10%';
            
            pdfjsLib.getDocument({
                url: pdfUrl,
                cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/',
                cMapPacked: true
            }).promise.then(pdf => {
                pdfDoc = pdf;
                totalPages = pdf.numPages;
                
                // Update page info
                updatePageInfo3D();
                
                // Render first page dan preload berikutnya
                renderInitialPages3D();
                
                // Preload beberapa halaman pertama
                setTimeout(() => {
                    preloadPages3D();
                }, 300);
                
            }).catch(error => {
                console.error('Error loading PDF:', error);
                flipbookLoading.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>Error memuat PDF. Pastikan file PDF valid.</p>
                    <button onclick="closeFlipbook3D()" style="background: var(--primary-blue); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px;">Tutup</button>
                `;
            });
        }

        function handleKeyboardNavigation3D(e) {
            if (flipbookModal.style.display !== 'flex') return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    goToPrevPage3D();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    goToNextPage3D();
                    break;
                case 'Escape':
                    e.preventDefault();
                    closeFlipbook3D();
                    break;
                case '+':
                case '=':
                    e.preventDefault();
                    zoomIn3D();
                    break;
                case '-':
                case '_':
                    e.preventDefault();
                    zoomOut3D();
                    break;
                case 'f':
                case 'F':
                    e.preventDefault();
                    toggleFullscreen3D();
                    break;
                case '1':
                    e.preventDefault();
                    switchViewMode3D(false);
                    break;
                case '2':
                    e.preventDefault();
                    switchViewMode3D(true);
                    break;
            }
        }

        function switchViewMode3D(doublePage) {
            isDoublePageMode = doublePage;
            
            // Update active button
            if (doublePage) {
                singlePageBtn.classList.remove('active');
                doublePageBtn.classList.add('active');
                flipbookSpread3d.parentElement.classList.remove('single-page-mode');
            } else {
                singlePageBtn.classList.add('active');
                doublePageBtn.classList.remove('active');
                flipbookSpread3d.parentElement.classList.add('single-page-mode');
            }
            
            // Re-render current page
            renderInitialPages3D();
            updateNavigationButtons3D();
        }

        function zoomIn3D() {
            if (flipbookZoom < 2.5) {
                flipbookZoom += 0.1;
                applyZoom3D();
                updateZoomInfo3D();
            }
        }

        function zoomOut3D() {
            if (flipbookZoom > 0.5) {
                flipbookZoom -= 0.1;
                applyZoom3D();
                updateZoomInfo3D();
            }
        }

        function applyZoom3D() {
            flipbookSpread3d.style.transform = `scale(${flipbookZoom})`;
        }

        function updateZoomInfo3D() {
            zoomLevelElement.textContent = `${Math.round(flipbookZoom * 100)}%`;
        }

        function toggleFullscreen3D() {
            const flipbookContainer = document.querySelector('.flipbook-container');
            
            if (!isFullscreen) {
                if (flipbookContainer.requestFullscreen) {
                    flipbookContainer.requestFullscreen();
                } else if (flipbookContainer.webkitRequestFullscreen) {
                    flipbookContainer.webkitRequestFullscreen();
                } else if (flipbookContainer.msRequestFullscreen) {
                    flipbookContainer.msRequestFullscreen();
                }
                isFullscreen = true;
                fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                isFullscreen = false;
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
            }
        }

        function updatePageInfo3D() {
            flipbookCurrentPage.textContent = currentPage;
            flipbookTotalPages.textContent = totalPages;
        }

        function updateNavigationButtons3D() {
            flipbookPrevButton.disabled = (currentPage <= 1);
            flipbookNextButton.disabled = (currentPage >= totalPages);
        }

        function updateReadCount3D() {
            if (!currentFlipbookData) return;
            
            // Update read count in admin magazines
            const magazineIndex = adminMagazines.findIndex(m => m.id === currentFlipbookData.id);
            if (magazineIndex !== -1) {
                adminMagazines[magazineIndex].reads = (adminMagazines[magazineIndex].reads || 0) + 1;
                localStorage.setItem('admin_magazines', JSON.stringify(adminMagazines));
                updateAdminDashboard();
            }
        }

        function handleWindowResize3D() {
            // Reset zoom if window is resized
            flipbookZoom = 1;
            applyZoom3D();
            updateZoomInfo3D();
        }

        function handleFullscreenChange3D() {
            isFullscreen = !!(document.fullscreenElement || 
                             document.webkitFullscreenElement || 
                             document.msFullscreenElement);
            
            if (isFullscreen) {
                fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
            } else {
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
            }
        }

        function closeFlipbook3D() {
            flipbookModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Reset state
            currentPage = 1;
            flipbookZoom = 1;
            pdfDoc = null;
            renderedPages = {};
            
            // Reset drag state
            isDragging = false;
            dragStartX = 0;
            dragCurrentX = 0;
            dragVelocity = 0;
            dragDirection = null;
            
            // Reset display
            leftPageContent3d.innerHTML = '';
            rightPageContent3d.innerHTML = '';
            leftPage3d.classList.remove('flipping', 'dragging');
            rightPage3d.classList.remove('flipping', 'dragging');
            
            // Exit fullscreen if active
            if (isFullscreen && document.exitFullscreen) {
                document.exitFullscreen();
                isFullscreen = false;
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
            }
        }

        // ========== ADMIN PANEL FUNCTIONS ==========
        function initAdminLogin() {
            if (adminLoginForm) {
                adminLoginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const email = document.getElementById('admin-email').value;
                    const password = document.getElementById('admin-password').value;
                    
                    // Cek kredensial admin
                    const adminUser = adminUsers.find(user => 
                        user.email === email && user.password === password
                    );
                    
                    if (adminUser) {
                        // Login berhasil
                        localStorage.setItem('adminUser', JSON.stringify(adminUser));
                        localStorage.setItem('adminLoggedIn', 'true');
                        
                        // Redirect ke panel admin
                        showAdminPanel();
                        initAdminPanel();
                        showToast('Login admin berhasil!', 'success');
                    } else {
                        // Login gagal
                        adminErrorAlert.style.display = 'block';
                        
                        setTimeout(() => {
                            adminErrorAlert.style.display = 'none';
                        }, 3000);
                    }
                });
            }
            
            if (adminBackButton) {
                adminBackButton.addEventListener('click', () => {
                    showMainWebsite();
                });
            }
        }

        function initAdminPanel() {
            const adminUser = JSON.parse(localStorage.getItem('adminUser'));
            
            if (adminUser) {
                adminUserAvatar.textContent = adminUser.name.charAt(0);
                adminUserName.textContent = adminUser.name;
            }
            
            updateAdminDashboard();
            displayAdminMagazines();
            displayAdminSubscribers();
            displayAdminComments();
            
            // Set tanggal hari ini sebagai default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('admin-magazine-date').value = today;
            
            // Event Listeners for Admin Panel Navigation
            document.querySelectorAll('.admin-nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Update menu aktif
                    document.querySelectorAll('.admin-nav-link').forEach(nav => nav.classList.remove('active'));
                    link.classList.add('active');
                    
                    // Tampilkan section yang sesuai
                    const section = link.getAttribute('data-section');
                    document.querySelectorAll('.admin-content-section').forEach(sec => {
                        sec.classList.remove('active');
                        if (sec.id === section) {
                            sec.classList.add('active');
                            document.getElementById('admin-page-title').textContent = getAdminPageTitle(section);
                        }
                    });
                });
            });
            
            // Admin Logout
            adminLogoutBtn.addEventListener('click', () => {
                if (confirm('Apakah Anda yakin ingin keluar dari panel admin?')) {
                    localStorage.removeItem('adminUser');
                    localStorage.removeItem('adminLoggedIn');
                    showAdminLogin();
                    showToast('Anda telah logout dari panel admin.', 'info');
                }
            });
            
            // Kembali ke website
            adminBackToWebsite.addEventListener('click', (e) => {
                e.preventDefault();
                showMainWebsite();
            });
            
            // Toggle sidebar
            adminToggleSidebar.addEventListener('click', () => {
                adminSidebar.classList.toggle('collapsed');
                adminMainContent.classList.toggle('expanded');
            });
            
            // Tambah majalah
            adminAddMagazineBtn.addEventListener('click', openAdminAddMagazineModal);
            adminAddMagazineBtn2.addEventListener('click', openAdminAddMagazineModal);
            
            // Modal events
            adminMagazineModal.querySelector('.close-modal').addEventListener('click', () => {
                adminMagazineModal.style.display = 'none';
            });
            
            adminCancelBtn.addEventListener('click', () => {
                adminMagazineModal.style.display = 'none';
            });
            
            // File input events
            document.getElementById('admin-magazine-cover').addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    adminCoverFileName.textContent = e.target.files[0].name;
                }
            });
            
            // Form submission
            adminMagazineForm.addEventListener('submit', saveAdminMagazine);
            
            // PDF upload button
            addPdfBtn.addEventListener('click', addPDFUploadItem);
            
            // Preview upload button
            addPreviewPageBtn.addEventListener('click', addPreviewPageUpload);
        }

        function getAdminPageTitle(section) {
            const titles = {
                'admin-dashboard': 'Dashboard Admin',
                'admin-magazines': 'Kelola Majalah',
                'admin-subscribers': 'Data Pelanggan',
                'admin-comments': 'Komentar Pengguna'
            };
            return titles[section] || 'Dashboard Admin';
        }

        function updateAdminDashboard() {
            // Hitung total
            const totalMagazinesCount = adminMagazines.length;
            const totalSubscribersCount = subscribers.length;
            const totalCommentsCount = comments.length;
            
            // Hitung total pendapatan
            let income = 0;
            subscribers.forEach(sub => {
                if (sub.status === 'confirmed') {
                    income += parseInt(sub.price);
                }
            });
            
            // Update elemen
            document.getElementById('admin-total-magazines').textContent = totalMagazinesCount;
            document.getElementById('admin-total-subscribers').textContent = totalSubscribersCount;
            document.getElementById('admin-total-income').textContent = formatCurrency(income);
            document.getElementById('admin-total-comments').textContent = totalCommentsCount;
            
            // Tampilkan majalah terbaru
            displayAdminRecentMagazines();
        }

        function displayAdminRecentMagazines() {
            const adminRecentMagazines = document.getElementById('admin-recent-magazines');
            adminRecentMagazines.innerHTML = '';
            
            if (adminMagazines.length === 0) {
                adminRecentMagazines.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px;">
                            <i class="fas fa-book" style="font-size: 40px; color: #cbd5e0; margin-bottom: 15px;"></i>
                            <p style="color: #718096;">Belum ada majalah. <a href="#" id="admin-add-first-magazine" style="color: var(--primary-blue); font-weight: 600;">Tambah majalah pertama</a></p>
                        </td>
                    </tr>
                `;
                
                document.getElementById('admin-add-first-magazine').addEventListener('click', openAdminAddMagazineModal);
                return;
            }
            
            // Urutkan berdasarkan tanggal terbaru
            const sortedMagazines = [...adminMagazines].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Ambil 5 terbaru
            const recent = sortedMagazines.slice(0, 5);
            
            recent.forEach(magazine => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${magazine.title}</strong></td>
                    <td>${formatDate(magazine.date)}</td>
                    <td><span class="subscription-status ${magazine.accessType === 'free' ? 'free' : 'active'}">${magazine.accessType === 'free' ? 'Gratis' : 'Aktif'}</span></td>
                    <td><strong>${magazine.reads || 0}</strong> kali</td>
                    <td class="admin-action-buttons">
                        <button class="admin-edit-btn" data-id="${magazine.id}"><i class="fas fa-edit"></i> Edit</button>
                        <button class="admin-delete-btn" data-id="${magazine.id}"><i class="fas fa-trash"></i> Hapus</button>
                        ${magazine.pdfUrl ? `<button class="admin-preview-btn" data-id="${magazine.id}"><i class="fas fa-eye"></i> Preview</button>` : ''}
                    </td>
                `;
                
                adminRecentMagazines.appendChild(row);
            });
            
            // Tambah event listeners untuk tombol aksi
            addAdminMagazineActionListeners();
        }

        function displayAdminMagazines() {
            const adminMagazinesList = document.getElementById('admin-magazines-list');
            adminMagazinesList.innerHTML = '';
            
            if (adminMagazines.length === 0) {
                adminMagazinesList.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px;">
                            <i class="fas fa-book" style="font-size: 40px; color: #cbd5e0; margin-bottom: 15px;"></i>
                            <p style="color: #718096;">Belum ada majalah. <a href="#" id="admin-add-first-magazine-2" style="color: var(--primary-blue); font-weight: 600;">Tambah majalah pertama</a></p>
                        </td>
                    </tr>
                `;
                
                document.getElementById('admin-add-first-magazine-2').addEventListener('click', openAdminAddMagazineModal);
                return;
            }
            
            // Urutkan berdasarkan tanggal terbaru
            const sortedMagazines = [...adminMagazines].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedMagazines.forEach(magazine => {
                const previewCount = magazine.previewPages ? magazine.previewPages.length : 0;
                const previewStatus = previewCount > 0 ? 
                    `<span style="color: var(--success-green); font-weight: 600;">${previewCount} halaman</span>` : 
                    `<span style="color: var(--error-red);">Tidak ada</span>`;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${magazine.title}</strong></td>
                    <td>${formatDate(magazine.date)}</td>
                    <td>${magazine.accessType === 'free' ? 'GRATIS' : formatCurrency(magazine.price)}</td>
                    <td><span class="subscription-status ${magazine.accessType === 'free' ? 'free' : 'active'}">${magazine.accessType === 'free' ? 'Gratis' : 'Premium'}</span></td>
                    <td>${previewStatus}</td>
                    <td class="admin-action-buttons">
                        <button class="admin-edit-btn" data-id="${magazine.id}"><i class="fas fa-edit"></i> Edit</button>
                        <button class="admin-delete-btn" data-id="${magazine.id}"><i class="fas fa-trash"></i> Hapus</button>
                        ${magazine.pdfUrl ? `<button class="admin-preview-btn" data-id="${magazine.id}"><i class="fas fa-eye"></i> PDF</button>` : ''}
                        ${previewCount > 0 ? `<button class="admin-view-preview-btn" data-id="${magazine.id}"><i class="fas fa-images"></i> Preview</button>` : ''}
                    </td>
                `;
                
                adminMagazinesList.appendChild(row);
            });
            
            // Tambah event listeners untuk tombol aksi
            addAdminMagazineActionListeners();
            
            // Tambah event listener untuk tombol view preview
            document.querySelectorAll('.admin-view-preview-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const magazineId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    const magazine = adminMagazines.find(m => m.id === magazineId);
                    
                    if (magazine) {
                        openPreviewModal(magazine);
                    }
                });
            });
        }

        function displayAdminSubscribers() {
            const adminSubscribersList = document.getElementById('admin-subscribers-list');
            adminSubscribersList.innerHTML = '';
            
            if (subscribers.length === 0) {
                adminSubscribersList.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px;">
                            <i class="fas fa-users" style="font-size: 40px; color: #cbd5e0; margin-bottom: 15px;"></i>
                            <p style="color: #718096;">Belum ada data pelanggan.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Urutkan berdasarkan tanggal terbaru
            const sortedSubscribers = [...subscribers].sort((a, b) => new Date(b.subscriptionDate) - new Date(a.subscriptionDate));
            
            sortedSubscribers.forEach(subscriber => {
                const row = document.createElement('tr');
                
                // Tentukan jenis langganan
                const subscriptionType = subscriber.magazineId ? 
                    `Majalah: ${getMagazineTitleById(subscriber.magazineId)}` : 
                    `Paket: ${subscriber.package}`;
                
                // Tentukan status dengan badge
                const statusClass = subscriber.status === 'confirmed' ? 'active' : 
                                   subscriber.status === 'pending' ? 'pending' : 'expired';
                const statusText = subscriber.status === 'confirmed' ? 'Aktif' : 
                                  subscriber.status === 'pending' ? 'Pending' : 'Kadaluarsa';
                const statusBadge = `<span class="subscription-status ${statusClass}">${statusText}</span>`;
                
                row.innerHTML = `
                    <td><strong>${subscriber.userName}</strong></td>
                    <td>${subscriber.userEmail}</td>
                    <td>${subscriptionType}</td>
                    <td>${formatDate(subscriber.subscriptionDate)}</td>
                    <td>${statusBadge}</td>
                    <td class="admin-action-buttons">
                        ${subscriber.status === 'pending' ? 
                            `<button class="admin-confirm-btn" data-id="${subscriber.id}"><i class="fas fa-check"></i> Konfirmasi</button>` : 
                            ''
                        }
                        <button class="admin-delete-btn" data-id="${subscriber.id}"><i class="fas fa-trash"></i> Hapus</button>
                    </td>
                `;
                
                adminSubscribersList.appendChild(row);
            });
            
            // Tambah event listeners untuk tombol aksi
            document.querySelectorAll('.admin-confirm-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const subscriberId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    confirmSubscriber(subscriberId);
                });
            });
            
            document.querySelectorAll('.admin-delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const subscriberId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    deleteSubscriber(subscriberId);
                });
            });
        }

        function displayAdminComments() {
            const adminCommentsList = document.getElementById('admin-comments-list');
            adminCommentsList.innerHTML = '';
            
            if (comments.length === 0) {
                adminCommentsList.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px;">
                            <i class="fas fa-comments" style="font-size: 40px; color: #cbd5e0; margin-bottom: 15px;"></i>
                            <p style="color: #718096;">Belum ada komentar dari pengguna.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Urutkan berdasarkan tanggal terbaru
            const sortedComments = [...comments].sort((a, b) => b.id - a.id);
            
            sortedComments.forEach(comment => {
                const row = document.createElement('tr');
                
                // Tentukan label untuk jenis komentar
                let typeLabel = '';
                if (comment.type === 'saran') typeLabel = 'Saran';
                else if (comment.type === 'penilaian') typeLabel = 'Penilaian';
                else if (comment.type === 'masukan') typeLabel = 'Masukan';
                
                // Tampilkan bintang rating
                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= comment.rating) {
                        starsHtml += '<span style="color: #f6ad55;"></span>';
                    } else {
                        starsHtml += '<span style="color: #cbd5e0;"></span>';
                    }
                }
                
                row.innerHTML = `
                    <td><strong>${comment.userName}</strong></td>
                    <td><span class="comment-type ${comment.type}">${typeLabel}</span></td>
                    <td>${starsHtml}</td>
                    <td>${comment.date}</td>
                    <td class="admin-action-buttons">
                        <button class="admin-delete-btn" data-id="${comment.id}"><i class="fas fa-trash"></i> Hapus</button>
                    </td>
                `;
                
                adminCommentsList.appendChild(row);
            });
            
            // Tambah event listeners untuk tombol hapus
            document.querySelectorAll('.admin-delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const commentId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    deleteComment(commentId);
                });
            });
        }

        function openAdminAddMagazineModal() {
            document.getElementById('admin-modal-title').textContent = 'Tambah Majalah Baru';
            document.getElementById('admin-magazine-form').reset();
            document.getElementById('admin-magazine-id').value = '';
            adminCoverFileName.textContent = 'Belum ada file dipilih';
            document.getElementById('admin-magazine-access').value = 'premium'; // Default ke premium
            
            // Reset PDF upload
            pdfUploadContainer.innerHTML = '';
            
            // Reset preview pages
            adminPreviewPages = [];
            previewPagesList.innerHTML = '';
            
            // Tambah PDF upload item secara default
            addPDFUploadItem();
            
            // Set tanggal hari ini sebagai default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('admin-magazine-date').value = today;
            
            adminMagazineModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function addPDFUploadItem() {
            const pdfItem = document.createElement('div');
            pdfItem.className = 'pdf-upload-container';
            pdfItem.innerHTML = `
                <div class="pdf-preview">
                    <i class="fas fa-file-pdf"></i>
                    <span>File PDF</span>
                </div>
                <div class="admin-file-input-container" style="flex: 1;">
                    <input type="file" id="pdf-file" class="admin-file-input pdf-file-input" accept=".pdf">
                    <label for="pdf-file" class="admin-file-input-label">
                        <i class="fas fa-cloud-upload-alt"></i> Pilih File PDF
                    </label>
                </div>
                <div class="pdf-upload-actions">
                    <button type="button" class="remove-pdf-btn">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            pdfUploadContainer.innerHTML = ''; // Hanya satu PDF yang diizinkan
            pdfUploadContainer.appendChild(pdfItem);
            
            // Event listener untuk file input
            const fileInput = pdfItem.querySelector('.pdf-file-input');
            fileInput.addEventListener('change', function() {
                handlePDFUpload(this);
            });
            
            // Event listener untuk tombol hapus
            const removeBtn = pdfItem.querySelector('.remove-pdf-btn');
            removeBtn.addEventListener('click', function() {
                pdfUploadContainer.innerHTML = '';
            });
        }

        function handlePDFUpload(input) {
            const file = input.files[0];
            
            if (file) {
                if (file.type !== 'application/pdf') {
                    showToast('Harap pilih file PDF!', 'error');
                    input.value = '';
                    return;
                }
                
                // Tampilkan nama file
                const label = input.nextElementSibling;
                label.innerHTML = `<i class="fas fa-file-pdf"></i> ${file.name}`;
                
                // Update preview
                const preview = input.closest('.pdf-upload-container').querySelector('.pdf-preview');
                preview.innerHTML = `
                    <i class="fas fa-file-pdf"></i>
                    <span>${file.name.length > 15 ? file.name.substring(0, 12) + '...' : file.name}</span>
                `;
            }
        }

        function addPreviewPageUpload() {
            // Batasi maksimal 5 halaman preview
            if (adminPreviewPages.length >= 5) {
                showToast('Maksimal 5 halaman preview untuk setiap majalah.', 'warning');
                return;
            }
            
            const pageNumber = adminPreviewPages.length + 1;
            
            const pageItem = document.createElement('div');
            pageItem.className = 'preview-page-item';
            pageItem.dataset.pageNumber = pageNumber;
            pageItem.innerHTML = `
                <div class="preview-page-header">
                    <span class="preview-page-number-label">Halaman ${pageNumber}</span>
                    <button type="button" class="preview-page-remove" onclick="removePreviewPage(${pageNumber})">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="preview-page-preview placeholder">
                    <i class="fas fa-image"></i>
                    <span>Belum diupload</span>
                </div>
                <div class="admin-file-input-container">
                    <input type="file" class="admin-file-input preview-page-input" 
                           data-page="${pageNumber}" accept="image/*">
                    <label for="preview-page-${pageNumber}" class="admin-file-input-label">
                        <i class="fas fa-cloud-upload-alt"></i> Unggah Gambar
                    </label>
                </div>
                <div class="preview-page-file-name">Belum ada file dipilih</div>
            `;
            
            // Event listener untuk file input
            const fileInput = pageItem.querySelector('.preview-page-input');
            fileInput.addEventListener('change', function() {
                handlePreviewPageUpload(this, pageNumber);
            });
            
            previewPagesList.appendChild(pageItem);
            adminPreviewPages.push({
                pageNumber: pageNumber,
                url: null,
                file: null
            });
        }
        
        function handlePreviewPageUpload(input, pageNumber) {
            const file = input.files[0];
            
            if (file) {
                if (!file.type.startsWith('image/')) {
                    showToast('Harap pilih file gambar!', 'error');
                    input.value = '';
                    return;
                }
                
                // Preview gambar
                const reader = new FileReader();
                reader.onload = function(e) {
                    const pageItem = document.querySelector(`.preview-page-item[data-page-number="${pageNumber}"]`);
                    const previewDiv = pageItem.querySelector('.preview-page-preview');
                    const fileNameDiv = pageItem.querySelector('.preview-page-file-name');
                    
                    previewDiv.className = 'preview-page-preview';
                    previewDiv.innerHTML = `<img src="${e.target.result}" alt="Preview halaman ${pageNumber}">`;
                    fileNameDiv.textContent = file.name.length > 20 ? file.name.substring(0, 20) + '...' : file.name;
                    
                    // Update class
                    pageItem.classList.add('uploaded');
                    
                    // Update data
                    const pageIndex = adminPreviewPages.findIndex(p => p.pageNumber === pageNumber);
                    if (pageIndex !== -1) {
                        adminPreviewPages[pageIndex].url = e.target.result;
                        adminPreviewPages[pageIndex].file = file;
                    }
                };
                reader.readAsDataURL(file);
            }
        }
        
        function removePreviewPage(pageNumber) {
            if (confirm('Hapus halaman preview ini?')) {
                const pageItem = document.querySelector(`.preview-page-item[data-page-number="${pageNumber}"]`);
                if (pageItem) {
                    pageItem.remove();
                }
                
                // Hapus dari array
                adminPreviewPages = adminPreviewPages.filter(p => p.pageNumber !== pageNumber);
                
                // Update nomor halaman yang tersisa
                const remainingItems = document.querySelectorAll('.preview-page-item');
                remainingItems.forEach((item, index) => {
                    const newPageNumber = index + 1;
                    item.dataset.pageNumber = newPageNumber;
                    
                    // Update label
                    const label = item.querySelector('.preview-page-number-label');
                    if (label) {
                        label.textContent = `Halaman ${newPageNumber}`;
                    }
                    
                    // Update file input data attribute
                    const fileInput = item.querySelector('.preview-page-input');
                    if (fileInput) {
                        fileInput.dataset.page = newPageNumber;
                    }
                });
                
                // Update array page numbers
                adminPreviewPages.forEach((page, index) => {
                    page.pageNumber = index + 1;
                });
            }
        }

        function saveAdminMagazine(e) {
            e.preventDefault();
            
            const id = document.getElementById('admin-magazine-id').value ? 
                parseInt(document.getElementById('admin-magazine-id').value) : Date.now();
            const title = document.getElementById('admin-magazine-title').value;
            const date = document.getElementById('admin-magazine-date').value;
            const price = document.getElementById('admin-magazine-price').value;
            const description = document.getElementById('admin-magazine-description').value;
            const accessType = document.getElementById('admin-magazine-access').value;
            
            // Validasi form
            if (!title || !date || !price || !accessType) {
                showToast('Harap isi semua field yang wajib!', 'error');
                return;
            }
            
            // Cek apakah file cover sudah dipilih (kecuali edit)
            const coverFile = document.getElementById('admin-magazine-cover').files[0];
            
            if (!coverFile && !document.getElementById('admin-magazine-id').value) {
                showToast('Harap pilih gambar cover!', 'error');
                return;
            }
            
            // Cek apakah file PDF sudah dipilih (kecuali edit)
            const pdfFileInput = document.querySelector('.pdf-file-input');
            let pdfFile = null;
            if (pdfFileInput) {
                pdfFile = pdfFileInput.files[0];
            }
            
            if ((!pdfFile || !pdfFileInput) && !document.getElementById('admin-magazine-id').value) {
                showToast('Harap pilih file PDF untuk majalah!', 'error');
                return;
            }
            
            // Proses file cover
            let coverUrl = '';
            if (coverFile) {
                // Simulasikan upload file dengan URL sementara
                coverUrl = URL.createObjectURL(coverFile);
            } else {
                // Jika edit dan tidak mengubah cover, gunakan cover yang sudah ada
                const existingMagazine = adminMagazines.find(m => m.id === id);
                coverUrl = existingMagazine ? existingMagazine.coverUrl : '';
            }
            
            // Proses file PDF
            let pdfUrl = '';
            let pdfFileName = '';
            
            if (pdfFile) {
                pdfUrl = URL.createObjectURL(pdfFile);
                pdfFileName = pdfFile.name;
            } else {
                // Jika edit dan tidak mengubah PDF, gunakan PDF yang sudah ada
                const existingMagazine = adminMagazines.find(m => m.id === id);
                pdfUrl = existingMagazine ? existingMagazine.pdfUrl : '';
                pdfFileName = existingMagazine ? existingMagazine.pdfFileName : '';
            }
            
            // Proses halaman preview
            const previewPagesData = [];
            adminPreviewPages.forEach((page, index) => {
                if (page.url) {
                    previewPagesData.push({
                        pageNumber: index + 1,
                        url: page.url
                    });
                }
            });
            
            // Buat objek majalah dengan accessType
            const magazine = {
                id: id,
                title: title,
                date: date,
                price: price,
                description: description,
                coverUrl: coverUrl,
                pdfUrl: pdfUrl,
                pdfFileName: pdfFileName,
                previewPages: previewPagesData,
                accessType: accessType || 'premium',
                reads: document.getElementById('admin-magazine-id').value ? 
                    (adminMagazines.find(m => m.id === id)?.reads || 0) : 0
            };
            
            // Simpan ke localStorage
            if (document.getElementById('admin-magazine-id').value) {
                // Edit majalah yang sudah ada
                const index = adminMagazines.findIndex(m => m.id === id);
                if (index !== -1) {
                    adminMagazines[index] = magazine;
                }
            } else {
                // Tambah majalah baru
                adminMagazines.push(magazine);
            }
            
            localStorage.setItem('admin_magazines', JSON.stringify(adminMagazines));
            
            // Update tampilan
            updateAdminDashboard();
            displayAdminMagazines();
            displayMagazinesFromAdmin();
            
            // Tutup modal
            adminMagazineModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            showToast(`Majalah "${title}" berhasil disimpan!`, 'success');
        }

        function addAdminMagazineActionListeners() {
            document.querySelectorAll('.admin-edit-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const magazineId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    const magazine = adminMagazines.find(m => m.id === magazineId);
                    
                    if (magazine) {
                        editAdminMagazine(magazine);
                    }
                });
            });
            
            document.querySelectorAll('.admin-delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const magazineId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    deleteAdminMagazine(magazineId);
                });
            });
            
            document.querySelectorAll('.admin-preview-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const magazineId = parseInt(e.target.closest('button').getAttribute('data-id'));
                    const magazine = adminMagazines.find(m => m.id === magazineId);
                    
                    if (magazine && magazine.pdfUrl) {
                        openFlipbook3D(magazine);
                    } else {
                        showToast('File PDF tidak tersedia untuk majalah ini.', 'error');
                    }
                });
            });
        }

        function editAdminMagazine(magazine) {
            document.getElementById('admin-modal-title').textContent = 'Edit Majalah';
            
            // Isi form dengan data majalah
            document.getElementById('admin-magazine-id').value = magazine.id;
            document.getElementById('admin-magazine-title').value = magazine.title;
            document.getElementById('admin-magazine-date').value = magazine.date;
            document.getElementById('admin-magazine-price').value = magazine.price;
            document.getElementById('admin-magazine-description').value = magazine.description || '';
            document.getElementById('admin-magazine-access').value = magazine.accessType || 'premium';
            
            // Reset file inputs
            adminCoverFileName.textContent = 'Gambar saat ini digunakan';
            
            // Reset PDF upload
            pdfUploadContainer.innerHTML = '';
            
            // Reset preview pages
            adminPreviewPages = [];
            previewPagesList.innerHTML = '';
            
            if (magazine.pdfUrl) {
                // Tambahkan item PDF yang sudah ada
                const pdfItem = document.createElement('div');
                pdfItem.className = 'pdf-upload-container';
                pdfItem.innerHTML = `
                    <div class="pdf-preview">
                        <i class="fas fa-file-pdf"></i>
                        <span>${magazine.pdfFileName ? (magazine.pdfFileName.length > 15 ? magazine.pdfFileName.substring(0, 12) + '...' : magazine.pdfFileName) : 'File PDF'}</span>
                    </div>
                    <div class="admin-file-input-container" style="flex: 1;">
                        <input type="file" id="pdf-file" class="admin-file-input pdf-file-input" accept=".pdf">
                        <label for="pdf-file" class="admin-file-input-label">
                            <i class="fas fa-file-pdf"></i> ${magazine.pdfFileName || 'File PDF saat ini'}
                        </label>
                    </div>
                    <div class="pdf-upload-actions">
                        <button type="button" class="remove-pdf-btn">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                pdfUploadContainer.appendChild(pdfItem);
                
                // Event listener untuk file input
                const fileInput = pdfItem.querySelector('.pdf-file-input');
                fileInput.addEventListener('change', function() {
                    handlePDFUpload(this);
                });
                
                // Event listener untuk tombol hapus
                const removeBtn = pdfItem.querySelector('.remove-pdf-btn');
                removeBtn.addEventListener('click', function() {
                    pdfUploadContainer.innerHTML = '';
                });
            } else {
                // Tambah PDF upload item kosong
                addPDFUploadItem();
            }
            
            // Load halaman preview jika ada
            if (magazine.previewPages && magazine.previewPages.length > 0) {
                magazine.previewPages.forEach((page, index) => {
                    adminPreviewPages.push({
                        pageNumber: index + 1,
                        url: page.url,
                        file: null
                    });
                    
                    // Buat item preview page
                    const pageItem = document.createElement('div');
                    pageItem.className = 'preview-page-item uploaded';
                    pageItem.dataset.pageNumber = index + 1;
                    pageItem.innerHTML = `
                        <div class="preview-page-header">
                            <span class="preview-page-number-label">Halaman ${index + 1}</span>
                            <button type="button" class="preview-page-remove" onclick="removePreviewPage(${index + 1})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="preview-page-preview">
                            <img src="${page.url}" alt="Preview halaman ${index + 1}">
                        </div>
                        <div class="preview-page-file-name">Halaman ${index + 1}</div>
                    `;
                    
                    previewPagesList.appendChild(pageItem);
                });
            }
            
            adminMagazineModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function deleteAdminMagazine(id) {
            if (confirm('Apakah Anda yakin ingin menghapus majalah ini?')) {
                adminMagazines = adminMagazines.filter(m => m.id !== id);
                localStorage.setItem('admin_magazines', JSON.stringify(adminMagazines));
                
                updateAdminDashboard();
                displayAdminMagazines();
                displayMagazinesFromAdmin();
                
                showToast('Majalah berhasil dihapus!', 'success');
            }
        }

        function confirmSubscriber(id) {
            const subscriberIndex = subscribers.findIndex(sub => sub.id === id);
            if (subscriberIndex !== -1) {
                subscribers[subscriberIndex].status = 'confirmed';
                localStorage.setItem('subscribers', JSON.stringify(subscribers));
                displayAdminSubscribers();
                updateAdminDashboard();
                showToast('Pelanggan berhasil dikonfirmasi!', 'success');
                
                // Refresh tampilan majalah di website utama jika user sedang login
                if (currentUser && currentUser.id === subscribers[subscriberIndex].userId) {
                    displayMagazinesFromAdmin();
                }
            }
        }

        function deleteSubscriber(id) {
            if (confirm('Apakah Anda yakin ingin menghapus data pelanggan ini?')) {
                subscribers = subscribers.filter(sub => sub.id !== id);
                localStorage.setItem('subscribers', JSON.stringify(subscribers));
                displayAdminSubscribers();
                updateAdminDashboard();
                showToast('Data pelanggan berhasil dihapus!', 'success');
            }
        }

        function deleteComment(id) {
            if (confirm('Apakah Anda yakin ingin menghapus komentar ini?')) {
                comments = comments.filter(c => c.id !== id);
                localStorage.setItem('comments', JSON.stringify(comments));
                displayAdminComments();
                updateAdminDashboard();
                displayComments();
                showToast('Komentar berhasil dihapus!', 'success');
            }
        }

        // ========== ADMIN REMOTE ACCESS ==========
        // Fungsi untuk mengakses panel admin dari URL
        // Admin dapat mengakses dengan menambahkan parameter ?admin=login
        // Contoh: https://websiteanda.com?admin=login
        
        // ========== INITIALIZE APPLICATION ==========
        // Start loading simulation
        document.addEventListener('DOMContentLoaded', function() {
            simulateLoading();
        });
        
        // Tambahkan fungsi untuk diakses global (jika diperlukan)
        window.removePreviewPage = removePreviewPage;
    </script>
</body>
</html>